"use strict";(self.webpackChunkCCSAIWebApplication=self.webpackChunkCCSAIWebApplication||[]).push([[720],{1720:(ft,E,p)=>{p.r(E),p.d(E,{CourseModule:()=>lt});var d=p(6517),g=p(2994),b=p(4850),c=p(6727);const y=(0,c.PH)("[Course] Load Courses"),D=(0,c.PH)("[Course] Load Courses Success",(0,c.Ky)()),G=((0,c.PH)("[Course] Load Courses Failure",(0,c.Ky)()),(0,c.PH)("[Course] Load Modules By Course Id",(0,c.Ky)())),Y=(0,c.PH)("[Course] Load Modules By Course Id Success",(0,c.Ky)()),S=(0,c.PH)("[Course] Load Discussion By Module Id",(0,c.Ky)()),V=(0,c.PH)("[Course] Load Discussion By Module Id Success",(0,c.Ky)()),A=(0,c.PH)("[Exercises] Load Exercises by Module Id",(0,c.Ky)()),O=(0,c.PH)("[Exercises] Load Exercises by Module Id Success",(0,c.Ky)()),T=((0,c.PH)("[Exercises] Load Exercises by Module Id Failure",(0,c.Ky)()),(0,c.PH)("[Course] Load Assessment By Module Id",(0,c.Ky)())),B=(0,c.PH)("[Course] Load Assessment By Module Id",(0,c.Ky)()),Q=(0,c.PH)("[Course] Create Discussion",(0,c.Ky)()),R=(0,c.PH)("[Course] Update Discussion",(0,c.Ky)()),$=(0,c.PH)("[Course] Create Course",(0,c.Ky)()),F=(0,c.PH)("[Course] Get course by Id",(0,c.Ky)()),H=(0,c.PH)("[Course] Get course by Id Success",(0,c.Ky)()),j=(0,c.PH)("[Course] Get course by Id Failure",(0,c.Ky)()),P=(0,c.PH)("[Course] Create Course Success",(0,c.Ky)()),z=(0,c.PH)("[Course] Update Course",(0,c.Ky)()),K=(0,c.PH)("[Course] Create Course Failure"),X=(0,c.PH)("[Course] Activate Course",(0,c.Ky)()),W=(0,c.PH)("[Course] Deactivate Course",(0,c.Ky)());var x=p(8259),e=p(5e3),ee=p(9993),h=p(75),U=p(6551),I=p(520);let k=(()=>{class s extends U.b{constructor(t){super(t),this.httpClient=t,this.baseURL=this.baseURL+"/modules/"}getModulesByCourseId(t){return this.httpClient.get(`${this.baseURL}getmodulesbycourseid/${t}`)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(I.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ne=(()=>{class s extends U.b{constructor(t){super(t),this.httpClient=t,this.baseURL=this.baseURL+"/discussions/"}getDiscussionsByModuleId(t){return this.httpClient.get(`${this.baseURL}getdiscussionsbymoduleid/${t}`)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(I.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),te=(()=>{class s extends U.b{constructor(t){super(t),this.httpClient=t,this.baseURL=this.baseURL+"/assessment/"}getAssessmentsByModuleId(t){return this.httpClient.get(`${this.baseURL}getassessmentsbymoduleid/${t}`)}getAssessmentById(t){return this.httpClient.get(`${this.baseURL}getassessmentbyid/${t}`)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(I.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),w=(()=>{class s extends U.b{constructor(t){super(t),this.httpClient=t,this.baseURL=this.baseURL+"/exercises/"}getExerciseByDiscussionId(t){return this.httpClient.get(`${this.baseURL}getbydiscussionid/${t}`)}getExerciseByModuleId(t){return this.httpClient.get(`${this.baseURL}getexercisesbymoduleid/${t}`)}activateExercise(t){return this.httpClient.put(`${this.baseURL}activate/${t._id}`,t)}deactivateExercise(t){return this.httpClient.put(`${this.baseURL}deactivate/${t._id}`,t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(I.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ce=(()=>{class s{constructor(t,o,n,a,l,_,J,dt){this.actions$=t,this.courseStore=o,this.courseService=n,this.alertify=a,this.moduleService=l,this.discussionService=_,this.assessmentListDTOService=J,this.exerciseService=dt,this.loadCourses$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(y),(0,g.b)(m=>{this.courseService.Get(0,0).pipe((0,b.U)(u=>{this.courseStore.dispatch(D({data:u.data}))})).subscribe(x.noop,u=>console.log(u))})),{dispatch:!1}),this.loadModules$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(G),(0,g.b)(m=>{this.moduleService.getModulesByCourseId(m._id).pipe((0,b.U)(u=>{this.courseStore.dispatch(Y({data:u.data}))})).subscribe(x.noop,u=>console.log(u))})),{dispatch:!1}),this.loadDiscussions$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(S),(0,g.b)(m=>{this.discussionService.getDiscussionsByModuleId(m._id).pipe((0,b.U)(u=>{this.courseStore.dispatch(V({data:u.data}))})).subscribe(x.noop,u=>console.log(u))})),{dispatch:!1}),this.loadExercisesByModuleId$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(A),(0,g.b)(m=>{this.exerciseService.getExerciseByModuleId(m._id).pipe((0,b.U)(u=>{var re=[];u.data[0].discussions.forEach(mt=>{mt.exercises.forEach(pt=>{re.push(pt)})}),this.courseStore.dispatch(O({data:re}))})).subscribe(x.noop,u=>console.log(u))})),{dispatch:!1}),this.loadAssessmentsByModuleId$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(T),(0,g.b)(m=>{this.assessmentListDTOService.getAssessmentsByModuleId(m._id).pipe((0,b.U)(u=>{this.courseStore.dispatch(B({data:u.data}))})).subscribe(x.noop,u=>console.log(u))})),{dispatch:!1}),this.getCourseById$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(F),(0,g.b)(m=>{this.courseService.GetById(m._id).pipe((0,b.U)(u=>{this.courseStore.dispatch(H({course:u.data}))})).subscribe(x.noop,u=>{this.courseStore.dispatch(j({error:u})),this.alertify.error(u.error.error)})})),{dispatch:!1}),this.activateCourse$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(X),(0,g.b)(m=>{this.courseService.activateCourse(m.course).pipe((0,b.U)(u=>{this.courseStore.dispatch(y()),this.alertify.success("Course Activated")})).subscribe(x.noop,u=>{this.alertify.error(u.error.error)})})),{dispatch:!1}),this.createCourse$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)($),(0,g.b)(m=>{this.courseService.Create(m.data).pipe((0,b.U)(u=>{this.courseStore.dispatch(y()),this.courseStore.dispatch(P({data:u.data})),this.alertify.success("Course Saved.")})).subscribe(x.noop,u=>{this.courseStore.dispatch(K()),this.alertify.error(u.error.error)})})),{dispatch:!1}),this.updateCourse$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(z),(0,g.b)(m=>{this.courseService.Update(m.id,m.course).pipe((0,b.U)(u=>{this.courseStore.dispatch(F({_id:u.data._id})),this.courseStore.dispatch(y()),this.alertify.success("Course Saved.")})).subscribe(x.noop,u=>{this.alertify.error(u.error.error)})})),{dispatch:!1}),this.createDiscussion$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(Q),(0,g.b)(m=>{this.discussionService.Create(m.data).pipe((0,b.U)(u=>{this.courseStore.dispatch(S({_id:u.data.moduleId})),this.alertify.success("Discussion Saved.")})).subscribe(x.noop,u=>{this.alertify.error(u.error.error)})})),{dispatch:!1}),this.updateDiscussion$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(R),(0,g.b)(m=>{this.discussionService.Update(m.id,m.discussion).pipe((0,b.U)(u=>{this.courseStore.dispatch(S({_id:u.data.moduleId})),this.alertify.success("Discussion Saved.")})).subscribe(x.noop,u=>{this.alertify.error(u.error.error)})})),{dispatch:!1}),this.deactivateUser$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(W),(0,g.b)(m=>{this.courseService.deactivateCourse(m.course).pipe((0,b.U)(u=>{this.courseStore.dispatch(y()),this.alertify.success("Course deactivated")})).subscribe(x.noop,u=>{this.alertify.error(u.error.error)})})),{dispatch:!1})}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(d.eX),e.LFG(c.yh),e.LFG(ee.N),e.LFG(h.R),e.LFG(k),e.LFG(ne),e.LFG(te),e.LFG(w))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();const ue=(0,c.Lq)({courses:[],course:{_id:"",course:"",courseCode:"",course_status:""},moduleList:[],discussions:[],assessmentsList:[],exercises:[]},(0,c.on)(D,(s,r)=>Object.assign(Object.assign({},s),{courses:r.data})),(0,c.on)(H,(s,r)=>Object.assign(Object.assign({},s),{course:r.course})),(0,c.on)(j,(s,r)=>Object.assign(Object.assign({},s),{course:{_id:"",course:"",courseCode:"",course_status:""}})),(0,c.on)(P,(s,r)=>Object.assign(Object.assign({},s),{course:r.data})),(0,c.on)(K,(s,r)=>Object.assign(Object.assign({},s),{course:{_id:"",course:"",courseCode:"",course_status:""}})),(0,c.on)(Y,(s,r)=>Object.assign(Object.assign({},s),{moduleList:r.data})),(0,c.on)(V,(s,r)=>Object.assign(Object.assign({},s),{discussions:r.data})),(0,c.on)(B,(s,r)=>Object.assign(Object.assign({},s),{assessmentsList:r.data})),(0,c.on)(O,(s,r)=>Object.assign(Object.assign({},s),{exercises:r.data})));var Z=p(4702),i=p(4182),C=p(9808),f=p(4159),v=p(777);function le(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().clear()}),e._uU(1,"Clear"),e.qZA()}}function de(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).deactivate(n)}),e.qZA()}}function me(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).activate(n)}),e.qZA()}}function pe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",27)(1,"div",28)(2,"h6",29)(3,"a",30),e._uU(4),e.qZA()(),e.TgZ(5,"div",31)(6,"div",32)(7,"div")(8,"strong"),e._uU(9,"Instructions"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div")(12,"strong"),e._uU(13,"Exercise"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"div",33)(16,"button",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).selectExercise(a)}),e.qZA(),e.YNc(17,de,1,0,"button",35),e.YNc(18,me,1,0,"button",36),e.qZA()()()()()}if(2&s){const t=r.$implicit,o=r.index;e.xp6(3),e.MGl("href","#collapseExercise",o,"",e.LSH),e.xp6(1),e.lnq("",t.exerciseName,"(",t.points," pts.) - ",t.exercise_status,""),e.xp6(1),e.MGl("id","collapseExercise",o,""),e.xp6(5),e.hij(" : ",t.instructions," "),e.xp6(4),e.hij(" : ",t.exerciseDetails," "),e.xp6(3),e.Q6J("ngIf","active"===t.exercise_status),e.xp6(1),e.Q6J("ngIf","deactivated"===t.exercise_status)}}function fe(s,r){if(1&s&&(e.TgZ(0,"div",5)(1,"div")(2,"h4",24),e._uU(3,"Exercises"),e.qZA()(),e.TgZ(4,"div",25),e.YNc(5,pe,19,9,"div",26),e.qZA()()),2&s){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.exerciseList)}}let _e=(()=>{class s{constructor(t,o,n,a,l,_){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.exerciseService=a,this.route=l,this.courseStore=_,this.exerciseList=[],this.trans="NEW",this.exerciseForm=this.formBuilder.group({_id:[null],discussionId:[null,i.kI.required],exerciseDetails:[null,i.kI.required],exerciseName:[null,i.kI.required],instructions:[null,i.kI.required],points:[0,i.kI.required]})}ngOnInit(){this.exerciseForm.controls.discussionId.setValue(this.discussion._id),this.loadExercises()}get fc(){return this.exerciseForm.controls}save(){var t=this.exerciseForm.value;"INVALID"!==this.exerciseForm.status?(this.fc._id.value?this.exerciseService.Update(this.fc._id.value,t).subscribe(o=>{o.success&&(this.alertifyService.success("Exercise successfully updated."),this.loadExercises(),this.exerciseForm.reset({discussionId:this.discussion._id}))}):this.exerciseService.Create(t).subscribe(o=>{o.success&&(this.alertifyService.success("Exercise successfully added."),this.loadExercises(),this.exerciseForm.reset({discussionId:this.discussion._id,points:0}))}),this.courseStore.dispatch(A({_id:this.moduleId}))):this.alertifyService.error("Please fill up all required information.")}clear(){this.exerciseForm.reset({discussionId:this.discussion._id}),this.trans="ADD"}selectExercise(t){this.exerciseForm.controls._id.setValue(t._id),this.exerciseForm.controls.exerciseDetails.setValue(t.exerciseDetails),this.exerciseForm.controls.instructions.setValue(t.instructions),this.exerciseForm.controls.exerciseName.setValue(t.exerciseName),this.exerciseForm.controls.points.setValue(t.points),this.trans="UPDATE"}loadExercises(){this.exerciseService.getExerciseByDiscussionId(this.discussion._id).subscribe(t=>{t.count>0&&(this.exerciseList=t.data)})}activate(t){this.alertifyService.confirm("Exercise Activation","Activate selected exercise?",()=>{this.exerciseService.activateExercise(t).subscribe(o=>{o.success&&(this.alertifyService.success("Exercise Activated"),this.loadExercises())})})}deactivate(t){this.alertifyService.confirm("Exercise Deactivation","Deactivate selected exercise?",()=>{this.exerciseService.deactivateExercise(t).subscribe(o=>{o.success&&(this.alertifyService.error("Exercise deactivated"),this.loadExercises())})})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(w),e.Y36(f.gz),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-exercise-main-view"]],inputs:{discussion:"discussion",moduleId:"moduleId"},decls:40,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-10"],["for","exerciseName ",1,"form-label"],["type","text","id","exerciseName ","formControlName","exerciseName",1,"form-control"],[1,"col-2"],["for","points",1,"form-label"],["type","number","id","points","formControlName","points",1,"form-control"],[1,"mb-2"],["for","instructions ",1,"form-label"],["name","","id","","cols","30","rows","1","id","instructions ","formControlName","instructions",1,"form-control"],["for","title ",1,"form-label"],["name","","id","","cols","30","rows","3","id","exerciseDetails ","formControlName","exerciseDetails",1,"form-control",2,"background-color","black","color","yellow"],[1,"form-label"],[1,"mb-3"],["type","button","class","btn btn-primary mr-2",3,"click",4,"ngIf"],["type","submit ",1,"btn","btn-primary"],["class","modal-body",4,"ngIf"],["type","button",1,"btn","btn-primary","mr-2",3,"click"],[1,"ml-3"],["id","accordionExercise",1,"panel-group","accordion"],["class","panel panel-default",4,"ngFor","ngForOf"],[1,"panel","panel-default"],[1,"card"],[1,"card-header"],["data-toggle","collapse","data-parent","#accordionExercise",3,"href"],[1,"panel-collapse","collapse","in",3,"id"],[1,"card-body"],[1,"mt-2","d-flex","flex-row-reverse"],["type","button","aria-label","update",1,"btn","btn-primary","fa","fa-pencil-square-o","mr-2",3,"click"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-danger fa fa-ban","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-success fa fa-check","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",1,"btn","btn-outline-danger","fa","fa-ban",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",1,"btn","btn-outline-success","fa","fa-check",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div")(7,"form",4),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Exercise Name("),e.TgZ(13,"strong"),e._uU(14),e.qZA(),e._uU(15,")"),e.qZA(),e._UZ(16,"input",9),e.qZA(),e.TgZ(17,"div",10)(18,"label",11),e._uU(19,"Points"),e.qZA(),e._UZ(20,"input",12),e.qZA()(),e.TgZ(21,"div",13)(22,"label",14),e._uU(23,"Instructions"),e.qZA(),e._UZ(24,"textarea",15),e.qZA(),e.TgZ(25,"div",13)(26,"label",16),e._uU(27,"Exercise"),e.qZA(),e._UZ(28,"textarea",17),e.TgZ(29,"label",18)(30,"i"),e._uU(31,"Note : Type "),e.TgZ(32,"strong"),e._uU(33,'"[q-blank]"'),e.qZA()(),e._uU(34," before each question words."),e.qZA()(),e.TgZ(35,"div",19),e.YNc(36,le,2,0,"button",20),e.TgZ(37,"button",21),e._uU(38,"Save"),e.qZA()()()()(),e.YNc(39,fe,6,1,"div",22)),2&t&&(e.xp6(2),e.Oqu(o.discussion.title),e.xp6(5),e.Q6J("formGroup",o.exerciseForm),e.xp6(7),e.Oqu(o.trans),e.xp6(22),e.Q6J("ngIf",o.fc._id.value),e.xp6(3),e.Q6J("ngIf",o.exerciseList.length>0))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.wV,C.O5,C.sg,f.Od],styles:[""]}),s})(),he=(()=>{class s{constructor(t,o,n,a){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.discussionForm=this.formBuilder.group({_id:["",i.kI.required],discussion:["",i.kI.required],moduleId:["",i.kI.required],title:["",i.kI.required]})}ngOnInit(){this.discussionForm.controls._id.setValue(this.discussion._id),this.discussionForm.controls.discussion.setValue(this.discussion.discussion),this.discussionForm.controls.title.setValue(this.discussion.title),this.discussionForm.controls.moduleId.setValue(this.discussion.moduleId._id)}updateDiscussion(){var t=this.discussionForm.value;"INVALID"!==this.discussionForm.status?this.courseStore.dispatch(R({discussion:t,id:t._id})):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-discussion-modal"]],inputs:{discussion:"discussion"},decls:19,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","title ",1,"form-label"],["type","text ","id","title ","formControlName","title",1,"form-control"],["for","discussion ",1,"form-label"],["name","","id","","cols","30","rows","10","id","discussion ","formControlName","discussion",1,"form-control"],[1,"modal-footer"],["type","submit ",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Discussion"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.updateDiscussion()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Title"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",6)(13,"label",9),e._uU(14,"Discussion"),e.qZA(),e._UZ(15,"textarea",10),e.qZA()(),e.TgZ(16,"div",11)(17,"button",12),e._uU(18,"Save"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.discussionForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[""]}),s})(),be=(()=>{class s{constructor(t,o,n,a){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.discussionForm=this.formBuilder.group({discussion:["",i.kI.required],moduleId:["",i.kI.required],title:["",i.kI.required]})}ngOnInit(){this.discussionForm.controls.moduleId.setValue(this.moduleId)}get fc(){return this.discussionForm.controls}addNewDiscussion(){"INVALID"!==this.discussionForm.status?(this.courseStore.dispatch(Q({data:this.discussionForm.value})),this.discussionForm.reset({moduleId:this.moduleId})):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-discussion-modal"]],inputs:{moduleId:"moduleId"},decls:19,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","title ",1,"form-label"],["type","text ","id","title ","formControlName","title",1,"form-control"],["for","discussion ",1,"form-label"],["name","","id","","cols","30","rows","10","id","discussion ","formControlName","discussion",1,"form-control"],[1,"modal-footer"],["type","submit ",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"New Discussion"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.addNewDiscussion()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Title"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",6)(13,"label",9),e._uU(14,"Discussion"),e.qZA(),e._UZ(15,"textarea",10),e.qZA()(),e.TgZ(16,"div",11)(17,"button",12),e._uU(18,"Create"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.discussionForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[""]}),s})();const q=(0,c.ZF)("course"),ve=(0,c.P1)(q,s=>s.courses),N=(0,c.P1)(q,s=>s.course),ge=(0,c.P1)(q,s=>s.moduleList),xe=(0,c.P1)(q,s=>s.discussions),Ce=(0,c.P1)(q,s=>s.assessmentsList),Ze=(0,c.P1)(q,s=>s.exercises);let ye=(()=>{class s{constructor(t,o,n,a,l,_){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.exerciseService=a,this.route=l,this.courseStore=_,this.exerciseForm=this.formBuilder.group({_id:[null],discussionId:[null,i.kI.required],exerciseDetails:[null,i.kI.required],exerciseName:[null,i.kI.required],instructions:[null,i.kI.required],points:[0,i.kI.required]})}ngOnInit(){this.exerciseForm.controls._id.setValue(this.exercise._id),this.exerciseForm.controls.discussionId.setValue(this.exercise.discussionId),this.exerciseForm.controls.exerciseDetails.setValue(this.exercise.exerciseDetails),this.exerciseForm.controls.exerciseName.setValue(this.exercise.exerciseName),this.exerciseForm.controls.instructions.setValue(this.exercise.instructions),this.exerciseForm.controls.points.setValue(this.exercise.points)}get fc(){return this.exerciseForm.controls}save(){"INVALID"!==this.exerciseForm.status?this.exerciseService.Update(this.fc._id.value,this.exerciseForm.value).subscribe(o=>{o.success&&(this.alertifyService.success("Exercise successfully updated."),this.courseStore.dispatch(A({_id:this.moduleId})))}):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(w),e.Y36(f.gz),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-selected-exercise"]],inputs:{exercise:"exercise",moduleId:"moduleId"},decls:35,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-10"],["for","exerciseName ",1,"form-label"],["type","text","id","exerciseName ","formControlName","exerciseName",1,"form-control"],[1,"col-2"],["for","points",1,"form-label"],["type","number","id","points","formControlName","points",1,"form-control"],[1,"mb-2"],["for","instructions ",1,"form-label"],["name","","id","","cols","30","rows","1","id","instructions ","formControlName","instructions",1,"form-control"],["for","title ",1,"form-label"],["name","","id","","cols","30","rows","3","id","exerciseDetails ","formControlName","exerciseDetails",1,"form-control",2,"background-color","black","color","yellow"],[1,"form-label"],[1,"mb-3"],["type","submit ",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Exercise"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div")(7,"form",4),e.NdJ("ngSubmit",function(){return o.save()}),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),e._uU(12,"Exercise Name"),e.qZA(),e._UZ(13,"input",9),e.qZA(),e.TgZ(14,"div",10)(15,"label",11),e._uU(16,"Points"),e.qZA(),e._UZ(17,"input",12),e.qZA()(),e.TgZ(18,"div",13)(19,"label",14),e._uU(20,"Instructions"),e.qZA(),e._UZ(21,"textarea",15),e.qZA(),e.TgZ(22,"div",13)(23,"label",16),e._uU(24,"Exercise"),e.qZA(),e._UZ(25,"textarea",17),e.TgZ(26,"label",18)(27,"i"),e._uU(28,"Note : Type "),e.TgZ(29,"strong"),e._uU(30,'"[q-blank]"'),e.qZA()(),e._uU(31," before each question words."),e.qZA()(),e.TgZ(32,"div",19)(33,"button",20),e._uU(34,"Save"),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("formGroup",o.exerciseForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.wV],styles:[""]}),s})();var L=p(372);function Ae(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).deactivate(n)}),e.qZA()}}function Te(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw(2).activate(n)}),e.qZA()}}function qe(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h6",5)(3,"a",6),e._uU(4),e.qZA()(),e.TgZ(5,"div",7)(6,"div",8)(7,"div")(8,"strong"),e._uU(9,"Instructions"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"div")(12,"strong"),e._uU(13,"Exercise"),e.qZA(),e._uU(14),e.qZA(),e.TgZ(15,"div",9)(16,"button",10),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).updateExercise(a)}),e.qZA(),e.YNc(17,Ae,1,0,"button",11),e.YNc(18,Te,1,0,"button",12),e.qZA()()()()()}if(2&s){const t=r.$implicit,o=r.index;e.xp6(3),e.MGl("href","#collapseExercises",o,"",e.LSH),e.xp6(1),e.lnq("",t.exerciseName,"(",t.points," pts.) - ",t.exercise_status,""),e.xp6(1),e.MGl("id","collapseExercises",o,""),e.xp6(5),e.hij(" : ",t.instructions," "),e.xp6(4),e.hij(" : ",t.exerciseDetails," "),e.xp6(3),e.Q6J("ngIf","active"===t.exercise_status),e.xp6(1),e.Q6J("ngIf","deactivated"===t.exercise_status)}}function Ue(s,r){if(1&s&&(e.TgZ(0,"div",1),e.YNc(1,qe,19,9,"div",2),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.exerciseList)}}let Ie=(()=>{class s{constructor(t,o,n,a,l,_){this.alertifyService=t,this.tokenStorage=o,this.modalService=n,this.courseStore=a,this.exerciseService=l,this.route=_,this.exerciseList=[],this.moduleId=this.route.snapshot.paramMap.get("id"),this.courseStore.dispatch(A({_id:this.moduleId})),this.exerciseList$=this.courseStore.select(Ze),this.exerciseList$.subscribe(J=>{this.exerciseList=J})}ngOnInit(){}activate(t){this.alertifyService.confirm("Exercise Activation","Activate selected exercise?",()=>{this.exerciseService.activateExercise(t).subscribe(o=>{o.success&&(this.alertifyService.success("Exercise Activated"),this.courseStore.dispatch(A({_id:this.moduleId})))})})}deactivate(t){this.alertifyService.confirm("Exercise Deactivation","Deactivate selected exercise?",()=>{this.exerciseService.deactivateExercise(t).subscribe(o=>{o.success&&(this.alertifyService.error("Exercise deactivated"),this.courseStore.dispatch(A({_id:this.moduleId})))})})}updateExercise(t){const o=this.modalService.open(ye,{size:"lg",centered:!0,windowClass:"no-pointer-events"});o.componentInstance.exercise=t,o.componentInstance.moduleId=this.moduleId}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.R),e.Y36(L.i),e.Y36(v.FF),e.Y36(c.yh),e.Y36(w),e.Y36(f.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-exercise-list"]],decls:1,vars:1,consts:[["class","panel-group accordion","id","accordionExercises",4,"ngIf"],["id","accordionExercises",1,"panel-group","accordion"],["class","panel panel-default",4,"ngFor","ngForOf"],[1,"panel","panel-default"],[1,"card"],[1,"card-header"],["data-toggle","collapse","data-parent","#accordionExercises",3,"href"],[1,"panel-collapse","collapse","in",3,"id"],[1,"card-body"],[1,"mt-2","d-flex","flex-row-reverse"],["type","button","aria-label","update",1,"btn","btn-primary","fa","fa-pencil-square-o","mr-2",3,"click"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-danger fa fa-ban","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-success fa fa-check","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",1,"btn","btn-outline-danger","fa","fa-ban",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",1,"btn","btn-outline-success","fa","fa-check",3,"click"]],template:function(t,o){1&t&&e.YNc(0,Ue,2,1,"div",0),2&t&&e.Q6J("ngIf",o.exerciseList)},directives:[C.O5,C.sg,f.Od],styles:[""]}),s})(),M=(()=>{class s extends U.b{constructor(t){super(t),this.httpClient=t,this.baseURL=this.baseURL+"/assessment/"}activateAssessment(t){return this.httpClient.put(`${this.baseURL}activate/${t._id}`,t)}deactivateAssessment(t){return this.httpClient.put(`${this.baseURL}deactivate/${t._id}`,t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(I.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Se(s,r){if(1&s&&(e.TgZ(0,"li",25)(1,"a",26),e._uU(2),e.qZA()()),2&s){const t=r.index;e.xp6(1),e.Q6J("id","q"+(t+1)+"tab"),e.uIk("href","#q"+(t+1),e.LSH)("aria-controls","q"+t+1),e.xp6(1),e.hij("Question ",t+1,"")}}function ke(s,r){if(1&s&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",14)(3,"div",17)(4,"div",29)(5,"label",30),e._uU(6,"Points"),e.qZA(),e._UZ(7,"input",31),e.qZA(),e.TgZ(8,"div",29)(9,"label",32),e._uU(10,"Instructions"),e.qZA(),e._UZ(11,"textarea",33),e.qZA(),e.TgZ(12,"label",18),e._uU(13,"Question : "),e.qZA(),e._UZ(14,"textarea",34),e.TgZ(15,"label",35)(16,"i"),e._uU(17,"Note : Type "),e.TgZ(18,"strong"),e._uU(19,'"[q-blank] "'),e.qZA()(),e._uU(20," before each question words."),e.qZA()()()()()),2&s){const t=r.index;e.Q6J("id","q"+(t+1)),e.uIk("aria-labelledby","q"+(t+1)),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(10),e.MGl("for","questionDetail",t," "),e.xp6(2),e.MGl("id","questionDetail",t," ")}}function we(s,r){if(1&s&&(e.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"strong"),e._uU(5),e.qZA()()(),e.TgZ(6,"div",17)(7,"label",18)(8,"strong"),e._uU(9,"Group Name"),e.qZA(),e._uU(10," : "),e.qZA(),e._UZ(11,"input",19),e.qZA(),e._UZ(12,"div"),e.TgZ(13,"div",20)(14,"ul",21),e.YNc(15,Se,3,4,"li",22),e.qZA(),e.TgZ(16,"div",23),e.YNc(17,ke,21,5,"div",24),e.qZA()()()()),2&s){const t=r.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(4),e.hij("Group ",t+1,""),e.xp6(2),e.MGl("for","groupName",t,""),e.xp6(4),e.MGl("id","groupName",t,""),e.xp6(4),e.Q6J("ngForOf",o.questions(t).controls),e.xp6(2),e.Q6J("ngForOf",o.questions(t).controls)}}let Fe=(()=>{class s{constructor(t,o,n,a,l,_){this.activeModalUpdate=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.assessmentService=l,this.assessmentDTOService=_,this.assessmentForm=this.formBuilder.group({_id:[null,i.kI.required],assessmentName:[null,i.kI.required],moduleId:[null,i.kI.required],assessmentGroup:this.formBuilder.array([])})}ngOnInit(){this.assessmentDTOService.getAssessmentById(this.id).subscribe(t=>{this.assessment=t.data[0],this.fillData(this.assessment)})}assessmentGroup(){return this.assessmentForm.get("assessmentGroup")}newAssessmentGroup(t){return this.formBuilder.group({_id:[t._id],groupName:[t.groupName,i.kI.required],questions:this.formBuilder.array([])})}addAssessmentGroup(t){this.assessmentGroup().push(this.newAssessmentGroup(t))}newQuestion(t){return this.formBuilder.group({_id:[t._id],points:[t.points,i.kI.required],questionDetail:[t.questionDetail,i.kI.required],instructions:[t.instructions,i.kI.required]})}addQuestion(t,o){console.log(o),this.questions(o).push(this.newQuestion(t))}questions(t){return this.assessmentGroup().at(t).get("questions")}updateAssessment(){var t=this.assessmentForm.value;"INVALID"!==this.assessmentForm.status?this.alertifyService.confirm("Update Assessment","Save assessment?",()=>{this.assessmentService.Update(t._id,t).subscribe(o=>{o.success&&(this.courseStore.dispatch(T({_id:t.moduleId})),this.activeModalUpdate.close())})}):this.alertifyService.error("Please fill up all required information.")}fillData(t){var o=0;this.assessmentForm.controls._id.setValue(t._id),this.assessmentForm.controls.assessmentName.setValue(t.assessmentName),this.assessmentForm.controls.moduleId.setValue(t.moduleId),t.assessmentgroups.forEach(n=>{this.addAssessmentGroup(n),t.assessmentgroups[o].assessmentquestions.forEach(a=>{this.addQuestion(a,o)}),o++})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh),e.Y36(M),e.Y36(te))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-assessment"]],inputs:{id:"id"},decls:17,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","assessmentName",1,"form-label"],["type","text ","id","assessmentName","formControlName","assessmentName",1,"form-control"],["formArrayName","assessmentGroup",1,"m-3","row"],["class","card col-12","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit ",1,"btn","btn-primary"],[1,"card","col-12",2,"width","18rem"],[3,"formGroupName"],[1,"container-fluid","mt-3"],[1,"row","justify-content-between"],[1,"card-body"],[1,"form-label",3,"for"],["type","text ","formControlName","groupName",1,"form-control",3,"id"],["formArrayName","questions",1,"m-3"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],["id","myTabContent",1,"tab-content"],["class","tab-pane fade show ","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["role","presentation",1,"nav-item"],["data-toggle","tab","role","tab","aria-selected","true",1,"nav-link",3,"id"],["role","tabpanel",1,"tab-pane","fade","show",3,"id"],[1,"card","col-12"],[1,"mb-2"],["for"," points ",1,"form-label"],["type","number ","id","points ","formControlName","points",1,"form-control"],["for","instructions ",1,"form-label"],["name"," ","id"," ","cols","30 ","rows","1 ","id","instructions ","formControlName","instructions",1,"form-control"],["name"," ","id"," ","cols","30 ","rows","2 ","formControlName","questionDetail",1,"form-control",2,"background-color","black","color","yellow",3,"id"],[1,"form-label"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Assessemt"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModalUpdate.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.updateAssessment()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Assessment Name"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div",9),e.YNc(13,we,18,6,"div",10),e.qZA()(),e.TgZ(14,"div",11)(15,"button",12),e._uU(16,"Update"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.assessmentForm),e.xp6(7),e.Q6J("ngForOf",o.assessmentGroup().controls))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.CE,C.sg,i.x0],styles:[""]}),s})();function Ne(s,r){if(1&s&&(e.TgZ(0,"li",25)(1,"a",30),e._uU(2),e.qZA()()),2&s){const t=r.index;e.xp6(1),e.Q6J("id","q"+(t+1)+"tab"),e.uIk("href","#q"+(t+1),e.LSH)("aria-controls","q"+t+1),e.xp6(1),e.hij("Question ",t+1,"")}}function Le(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div",15)(3,"div",19)(4,"div",33)(5,"button",2),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw().index;return e.oxw().removeQuestion(l,a)}),e.TgZ(6,"span",3),e._uU(7,"\xd7"),e.qZA()()(),e.TgZ(8,"div",34)(9,"label",35),e._uU(10,"Points"),e.qZA(),e._UZ(11,"input",36),e.qZA(),e.TgZ(12,"div",34)(13,"label",37),e._uU(14,"Instructions"),e.qZA(),e._UZ(15,"textarea",38),e.qZA(),e.TgZ(16,"label",20),e._uU(17,"Question : "),e.qZA(),e._UZ(18,"textarea",39),e.TgZ(19,"label",40)(20,"i"),e._uU(21,"Note : Type "),e.TgZ(22,"strong"),e._uU(23,'"[q-blank] "'),e.qZA()(),e._uU(24," before each question words."),e.qZA()()()()()}if(2&s){const t=r.index;e.Q6J("id","q"+(t+1)),e.uIk("aria-labelledby","q"+(t+1)),e.xp6(2),e.Q6J("formGroupName",t),e.xp6(14),e.MGl("for","questionDetail",t," "),e.xp6(2),e.MGl("id","questionDetail",t," ")}}function Me(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"strong"),e._uU(5),e.qZA(),e.TgZ(6,"button",18),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().removeAssessmentGroup(a)}),e.qZA()()(),e.TgZ(7,"div",19)(8,"label",20)(9,"strong"),e._uU(10,"Group Name"),e.qZA(),e._uU(11," : "),e.qZA(),e._UZ(12,"input",21),e.qZA(),e._UZ(13,"div"),e.TgZ(14,"div",22)(15,"ul",23),e.YNc(16,Ne,3,4,"li",24),e.TgZ(17,"li",25)(18,"a",26),e.NdJ("click",function(){const a=e.CHM(t).index;return e.oxw().addQuestion(a)}),e._uU(19,"Add Question "),e._UZ(20,"i",27),e.qZA()()(),e.TgZ(21,"div",28),e.YNc(22,Le,25,5,"div",29),e.qZA()()()()}if(2&s){const t=r.index,o=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(4),e.hij("Group ",t+1,""),e.xp6(3),e.MGl("for","groupName",t,""),e.xp6(4),e.MGl("id","groupName",t,""),e.xp6(4),e.Q6J("ngForOf",o.questions(t).controls),e.xp6(6),e.Q6J("ngForOf",o.questions(t).controls)}}let Je=(()=>{class s{constructor(t,o,n,a,l){this.activeModalAdd=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.assessmentService=l,this.assessmentForm=this.formBuilder.group({assessmentName:[null,i.kI.required],moduleId:[null,i.kI.required],assessmentGroup:this.formBuilder.array([])})}ngOnInit(){this.assessmentForm.controls.moduleId.setValue(this.moduleId)}assessmentGroup(){return this.assessmentForm.get("assessmentGroup")}newAssessmentGroup(){return this.formBuilder.group({groupName:[null,i.kI.required],questions:this.formBuilder.array([])})}removeAssessmentGroup(t){this.assessmentGroup().removeAt(t)}addAssessmentGroup(){this.assessmentGroup().push(this.newAssessmentGroup())}questions(t){return this.assessmentGroup().at(t).get("questions")}newQuestion(){return this.formBuilder.group({points:["0.00",i.kI.required],questionDetail:[null,i.kI.required],instructions:[null,i.kI.required]})}addQuestion(t){this.questions(t).push(this.newQuestion())}removeQuestion(t,o){this.questions(t).removeAt(o)}get fc(){return this.assessmentForm.controls}addNewAssessment(){var t=this.assessmentForm.value;"INVALID"!==this.assessmentForm.status?this.alertifyService.confirm("Add Assessment","Save assessment?",()=>{this.assessmentService.Create(t).subscribe(o=>{o.success&&(this.courseStore.dispatch(T({_id:this.moduleId})),this.assessmentForm.reset({moduleId:this.moduleId}),this.activeModalAdd.close())})}):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh),e.Y36(M))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-add-assessment"]],inputs:{moduleId:"moduleId"},decls:20,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","assessmentName",1,"form-label"],["type","text ","id","assessmentName","formControlName","assessmentName",1,"form-control"],["type","button",1,"btn","btn-primary",3,"click"],["formArrayName","assessmentGroup",1,"m-3","row"],["class","card col-12","style","width: 18rem;",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","submit ",1,"btn","btn-primary"],[1,"card","col-12",2,"width","18rem"],[3,"formGroupName"],[1,"container-fluid","mt-3"],[1,"row","justify-content-between"],[1,"btn","btn-danger","fa","fa-trash",3,"click"],[1,"card-body"],[1,"form-label",3,"for"],["type","text ","formControlName","groupName",1,"form-control",3,"id"],["formArrayName","questions",1,"m-3"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"nav-item"],["id","contact-tab","data-toggle","tab","href","#","role","tab","aria-controls","contact","aria-selected","false",1,"nav-link","text-success",3,"click"],[1,"fa","fa-plus"],["id","myTabContent",1,"tab-content"],["class","tab-pane fade show ","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["data-toggle","tab","role","tab","aria-selected","true",1,"nav-link",3,"id"],["role","tabpanel",1,"tab-pane","fade","show",3,"id"],[1,"card","col-12"],[1,"row","justify-content-end"],[1,"mb-2"],["for"," points ",1,"form-label"],["type","number ","id","points ","formControlName","points",1,"form-control"],["for","instructions ",1,"form-label"],["name"," ","id"," ","cols","30 ","rows","1 ","id","instructions ","formControlName","instructions",1,"form-control"],["name"," ","id"," ","cols","30 ","rows","2 ","formControlName","questionDetail",1,"form-control",2,"background-color","black","color","yellow",3,"id"],[1,"form-label"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"New Assessment"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModalAdd.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.addNewAssessment()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Assessment Name"),e.qZA(),e._UZ(11,"input",8),e.qZA(),e.TgZ(12,"div")(13,"button",9),e.NdJ("click",function(){return o.addAssessmentGroup()}),e._uU(14,"Add Group"),e.qZA()(),e.TgZ(15,"div",10),e.YNc(16,Me,23,6,"div",11),e.qZA()(),e.TgZ(17,"div",12)(18,"button",13),e._uU(19,"Create"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.assessmentForm),e.xp6(10),e.Q6J("ngForOf",o.assessmentGroup().controls))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.CE,C.sg,i.x0],styles:[""]}),s})();function Ee(s,r){1&s&&(e._uU(0),e.ALo(1,"uppercase")),2&s&&e.hij(" ",e.lcZ(1,1,r.row.assessmentName)," ")}function De(s,r){1&s&&(e._uU(0),e.ALo(1,"uppercase")),2&s&&e.hij(" ",e.lcZ(1,1,r.row.assessment_status)," ")}function Ge(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;return e.oxw().deactivate(n)}),e.qZA()}}function Ye(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;return e.oxw().activate(n)}),e.qZA()}}function Ve(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){const a=e.CHM(t).row;return e.oxw().viewAssessment(a._id)}),e.qZA(),e.YNc(1,Ge,1,0,"button",18),e.YNc(2,Ye,1,0,"button",19)}if(2&s){const t=r.row,o=e.oxw();e.xp6(1),e.Q6J("ngIf","active"===t.assessment_status&&"admin"===o.currentUser.role),e.xp6(1),e.Q6J("ngIf","deactivated"===t.assessment_status&&"admin"===o.currentUser.role)}}let Oe=(()=>{class s{constructor(t,o,n,a,l,_){this.alertify=t,this.tokenStorage=o,this.modalService=n,this.courseStore=a,this.route=l,this.assessmentService=_,this.limit=10,this.assessmentList=[],this.temp=[],this.currentUser={},this.moduleId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.currentUser=null!==this.tokenStorage.getDecodedUserToken()?this.tokenStorage.getDecodedUserToken():{},this.moduleId&&(this.courseStore.dispatch(T({_id:this.moduleId})),this.assessmentList$=this.courseStore.select(Ce),this.assessmentList$.subscribe(t=>{this.assessmentList=t,this.temp=t}))}updateFilter(t){const o=t.target.value.toLowerCase(),n=this.temp.filter(function(a){return-1!==a.assessmentName.toLowerCase().indexOf(o)||!o});this.assessmentList=n}newAssessment(){this.modalService.open(Je,{size:"lg",centered:!0,windowClass:"no-pointer-events"}).componentInstance.moduleId=this.moduleId}viewAssessment(t){this.modalService.open(Fe,{size:"lg",centered:!0}).componentInstance.id=t}deactivate(t){this.alertify.confirm("Assessment Deactivation","Deactivate selected assessment?",()=>{this.assessmentService.deactivateAssessment(t).subscribe(o=>{o.success&&(this.courseStore.dispatch(T({_id:this.moduleId})),this.alertify.error("Assessment deactivated."))})})}activate(t){this.alertify.confirm("Assessment Activation","Activate selected assessment?",()=>{this.assessmentService.activateAssessment(t).subscribe(o=>{o.success&&(this.courseStore.dispatch(T({_id:this.moduleId})),this.alertify.success("Assessment activated."))})})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.R),e.Y36(L.i),e.Y36(v.FF),e.Y36(c.yh),e.Y36(f.gz),e.Y36(M))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-assessment-list"]],decls:26,vars:10,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-12","d-flex","justify-content-end"],[1,"btn","btn-primary","fa","fa-plus",3,"click"],[1,"d-flex","mt-4"],[1,"p-0"],["type","text","placeholder","Assessment","id","search",1,"form-control",3,"keyup"],[1,"ml-auto","mt-3"],["name","limit","id","limit",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"row","mt-1"],[1,"col-12"],[1,"bootstrap",3,"columnMode","footerHeight","rowHeight","rows","limit"],["name","ASSESSMENT","prop","assessmentName"],["ngx-datatable-cell-template",""],["name","STATUS","prop","assessment_status"],["name","ACTIONS","prop","action"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","View/Edit",1,"btn","btn-outline-primary","fa","fa-eye",3,"click"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-danger fa fa-ban","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-success fa fa-check","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",1,"btn","btn-outline-danger","fa","fa-ban",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",1,"btn","btn-outline-success","fa","fa-check",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.newAssessment()}),e.qZA()()(),e.TgZ(4,"div",4)(5,"div",5)(6,"input",6),e.NdJ("keyup",function(a){return o.updateFilter(a)}),e.qZA()(),e.TgZ(7,"div",7)(8,"select",8),e.NdJ("ngModelChange",function(a){return o.limit=a}),e.TgZ(9,"option",9),e._uU(10,"10"),e.qZA(),e.TgZ(11,"option",9),e._uU(12,"25"),e.qZA(),e.TgZ(13,"option",9),e._uU(14,"50"),e.qZA(),e.TgZ(15,"option",9),e._uU(16,"100"),e.qZA()()()(),e.TgZ(17,"div",10)(18,"div",11)(19,"ngx-datatable",12)(20,"ngx-datatable-column",13),e.YNc(21,Ee,2,3,"ng-template",14),e.qZA(),e.TgZ(22,"ngx-datatable-column",15),e.YNc(23,De,2,3,"ng-template",14),e.qZA(),e.TgZ(24,"ngx-datatable-column",16),e.YNc(25,Ve,3,2,"ng-template",14),e.qZA()()()()()),2&t&&(e.xp6(8),e.Q6J("ngModel",o.limit),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(4),e.Q6J("columnMode","force")("footerHeight",50)("rowHeight","auto")("rows",o.assessmentList)("limit",o.limit))},directives:[i.EJ,i.JJ,i.On,i.YN,i.Kr,Z.nE,Z.UC,Z.vq,f.Od,C.O5],pipes:[C.gd],styles:[".no-pointer-events[_ngcontent-%COMP%]{pointer-events:none}"]}),s})();function Be(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"h6",18)(3,"a",19),e._uU(4),e.qZA()(),e.TgZ(5,"div",20)(6,"div",21)(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div",22)(10,"button",23),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().openExercises(a)}),e.qZA(),e.TgZ(11,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().updateDiscussion(a)}),e.qZA()()()()()()}if(2&s){const t=r.$implicit,o=r.index;e.xp6(3),e.MGl("href","#collapse",o,"",e.LSH),e.xp6(1),e.Oqu(t.title),e.xp6(1),e.MGl("id","collapse",o,""),e.xp6(3),e.hij(" ",t.discussion," ")}}let Qe=(()=>{class s{constructor(t,o,n){this.modalService=t,this.route=o,this.courseStore=n,this.discussionList=[],this.moduleId=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.courseStore.dispatch(S({_id:this.moduleId})),this.discussionList$=this.courseStore.select(xe),this.discussionList$.subscribe(t=>{this.discussionList=t})}addDiscussion(){this.modalService.open(be,{size:"lg",centered:!0}).componentInstance.moduleId=this.moduleId}updateDiscussion(t){this.modalService.open(he,{size:"lg",centered:!0}).componentInstance.discussion=t}openExercises(t){const o=this.modalService.open(_e,{size:"lg",centered:!0});o.componentInstance.discussion=t,o.componentInstance.moduleId=this.moduleId}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.FF),e.Y36(f.gz),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-module-view-reference-tab"]],decls:26,vars:1,consts:[[1,"references","container","d-flex","flex-column","mt-5","bg-light","p-3",2,"min-height","350px"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","home-tab","data-toggle","tab","href","#Discussions","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active"],["id","profile-tab","data-toggle","tab","href","#Exercises","role","tab","aria-controls","profile","aria-selected","false",1,"nav-link"],["id","contact-tab","data-toggle","tab","href","#Assessments","role","tab","aria-controls","contact","aria-selected","false",1,"nav-link"],["id","contact-tab","data-toggle","tab","href","#resources","role","tab","aria-controls","contact","aria-selected","false",1,"nav-link"],["id","myTabContent",1,"tab-content",2,"max-height","400px","overflow-y","auto"],["id","Discussions","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"navbar","d-flex","flex-row","justify-content-end","mb-4"],[1,"btn","btn-primary","fa","fa-plus",3,"click"],["id","accordion",1,"panel-group","accordion"],["class","panel panel-default",4,"ngFor","ngForOf"],["id","Exercises","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],["id","Assessments","role","tabpanel","aria-labelledby","contact-tab",1,"tab-pane","fade","w-100","align-items-stretch"],["id","resources","role","tabpanel","aria-labelledby","contact-tab",1,"tab-pane","fade"],[1,"panel","panel-default"],[1,"card"],[1,"card-header"],["data-toggle","collapse","data-parent","#accordion",3,"href"],[1,"panel-collapse","collapse","in",3,"id"],[1,"card-body"],[1,"mt-2","d-flex","flex-row-reverse"],["aria-label","exercise",1,"btn","btn-primary","fa","fa-newspaper-o",3,"click"],["aria-label","update",1,"btn","btn-primary","fa","fa-pencil-square-o","mr-2",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"ul",1)(2,"li",2)(3,"a",3),e._uU(4,"Discussions"),e.qZA()(),e.TgZ(5,"li",2)(6,"a",4),e._uU(7,"Exercises"),e.qZA()(),e.TgZ(8,"li",2)(9,"a",5),e._uU(10,"Assessments"),e.qZA()(),e.TgZ(11,"li",2)(12,"a",6),e._uU(13,"Resources"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8)(16,"nav",9)(17,"button",10),e.NdJ("click",function(){return o.addDiscussion()}),e.qZA()(),e.TgZ(18,"div",11),e.YNc(19,Be,12,4,"div",12),e.qZA()(),e.TgZ(20,"div",13),e._UZ(21,"app-exercise-list"),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"app-assessment-list"),e.qZA(),e.TgZ(24,"div",15),e._uU(25,"..."),e.qZA()()()),2&t&&(e.xp6(19),e.Q6J("ngForOf",o.discussionList))},directives:[v.M2,C.sg,Ie,Oe],styles:[".modal-xl[_ngcontent-%COMP%]{max-width:90%}"]}),s})(),Re=(()=>{class s{constructor(t,o,n,a,l){this.activatedRoute=t,this.formBuilder=o,this.alertifyService=n,this.router=a,this.moduleService=l,this.moduleId="",this.courseId="",this.courseForm=this.formBuilder.group({courseCode:[""],course:[""]}),this.moduleForm=this.formBuilder.group({_id:[null,i.kI.nullValidator],courseId:["",i.kI.nullValidator],module:["",i.kI.nullValidator],discussions:[]}),this.activatedRoute.data.subscribe(_=>{this.moduleId=_.routeResolver.data._id,this.initializeValues(_.routeResolver.data)})}initializeValues(t){this.courseForm.controls.courseCode.setValue(t.courseId.courseCode.toUpperCase()),this.courseForm.controls.course.setValue(t.courseId.course),this.moduleForm.controls.courseId.setValue(t.courseId._id),this.moduleForm.controls._id.setValue(t._id),this.moduleForm.controls.module.setValue(t.module),this.moduleId=t._id,this.courseId=t.courseId._id}ngOnInit(){}updateModule(){var t=this.moduleForm.value;"INVALID"!==this.moduleForm.status?(t.discussions=[],t.discussions.push({title:"test",subTitle:"test2"}),this.alertifyService.confirm("Module Update","Update module?",()=>{this.moduleService.Update(this.moduleId,t).subscribe(o=>{this.alertifyService.success("Successfully Saved.")},o=>{this.alertifyService.error(o.error.error)})})):this.alertifyService.error("Please fill up all required information.")}back(){this.router.navigate(["./mainview/course/modulelist",this.courseId])}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(f.gz),e.Y36(i.qu),e.Y36(h.R),e.Y36(f.F0),e.Y36(k))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-module-view"]],decls:30,vars:2,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-4"],[1,"container"],[1,"card"],[1,"card-header","d-flex","flex-row","justify-content-between"],[1,""],["type","button",1,"btn","btn-primary","fa","fa-save",3,"click"],[1,"card-body","mb-0","pb-0"],[1,"row","g-3",3,"formGroup"],[1,"col-6"],["for","courseCode",1,"form-label"],["type","text","id","courseCode","formControlName","courseCode","readonly","",1,"form-control"],["for","course",1,"form-label"],["type","text","id","course","formControlName","course","readonly","",1,"form-control"],[1,"card-body","mt-0","pt-0"],[1,"g-3",3,"formGroup","ngSubmit"],[1,"col-12","d-flex"],[1,"p-0","col-6"],["for","module ",1,"form-label"],["type","text ","id","module ","formControlName","module",1,"form-control"],[1,"mt-4","d-flex","flex-row","justify-content-between"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6,"Module Information"),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return o.updateModule()}),e.qZA()(),e.TgZ(8,"div",7)(9,"form",8)(10,"div",9)(11,"label",10),e._uU(12,"Course Code"),e.qZA(),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",9)(15,"label",12),e._uU(16,"Course"),e.qZA(),e._UZ(17,"input",13),e.qZA()()(),e._UZ(18,"hr"),e.TgZ(19,"div",14)(20,"form",15),e.NdJ("ngSubmit",function(){return o.updateModule()}),e.TgZ(21,"div",16)(22,"div",17)(23,"label",18),e._uU(24,"Module"),e.qZA(),e._UZ(25,"input",19),e.qZA()()(),e._UZ(26,"app-module-view-reference-tab"),e.TgZ(27,"div",20)(28,"button",21),e.NdJ("click",function(){return o.back()}),e._uU(29,"Back"),e.qZA()()()()()()()),2&t&&(e.xp6(9),e.Q6J("formGroup",o.courseForm),e.xp6(11),e.Q6J("formGroup",o.moduleForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,Qe],styles:[""]}),s})();var oe=p(7221),ie=p(8896);let $e=(()=>{class s{constructor(t,o,n){this.alertify=t,this.courseService=o,this.router=n}resolve(t,o){return this.courseService.GetById(t.params.id).pipe((0,b.U)(n=>n),(0,oe.K)(n=>(this.alertify.error(n.error.error),this.router.navigateByUrl("/mainview/course"),ie.E)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.R),e.LFG(ee.N),e.LFG(f.F0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function He(s,r){1&s&&e._uU(0),2&s&&e.hij(" ",r.row.module," ")}const je=function(s){return["../../moduleview",s]};function Pe(s,r){1&s&&e._UZ(0,"button",31),2&s&&e.Q6J("routerLink",e.VKq(1,je,r.row._id))}let ze=(()=>{class s{constructor(t,o,n,a,l){this.alertifyService=t,this.formBuilder=o,this.activatedRoute=n,this.courseStore=a,this.moduleService=l,this.courseId="",this.courseForm=this.formBuilder.group({courseCode:[""],course:[""]}),this.moduleForm=this.formBuilder.group({courseId:["",i.kI.nullValidator],module:["",i.kI.nullValidator]}),this.moduleList=[],this.limit=10,this.temp=[],this.activatedRoute.data.subscribe(_=>{this.courseId=_.routeResolver.data._id,this.initializeValues(_.routeResolver.data)})}ngOnInit(){this.loadModules()}loadModules(){this.courseStore.dispatch(G({_id:this.courseId})),this.courseStore.select(ge).subscribe(t=>{this.moduleList=t,this.temp=t})}get fc(){return this.courseForm.controls}initializeValues(t){this.courseForm.controls.courseCode.setValue(t.courseCode.toUpperCase()),this.courseForm.controls.course.setValue(t.course),this.moduleForm.controls.courseId.setValue(this.courseId)}createModule(){var t=this.moduleForm.value;"INVALID"!==this.moduleForm.status?this.alertifyService.confirm("Module Registration","Add Module to the selected Course?",()=>{this.moduleService.Create(t).subscribe(o=>{this.alertifyService.success("Successfully Saved."),this.moduleForm.reset({courseId:this.courseId}),this.loadModules()},o=>{this.alertifyService.error(o.error.error)})}):this.alertifyService.error("Please fill up all required information.")}updateFilter(t){const o=t.target.value.toLowerCase(),n=this.temp.filter(function(a){return-1!==a.module.toLowerCase().indexOf(o)||!o});this.moduleList=n}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.R),e.Y36(i.qu),e.Y36(f.gz),e.Y36(c.yh),e.Y36(k))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-module-list"]],decls:52,vars:14,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","g-3",3,"formGroup"],[1,"col-6"],["for","courseCode",1,"form-label"],["type","text","id","courseCode","formControlName","courseCode","readonly","",1,"form-control"],["for","course",1,"form-label"],["type","text","id","course","formControlName","course","readonly","",1,"form-control"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-12","d-flex"],[1,"p-0","col-6"],["for","module ",1,"form-label"],["type","text ","id","module ","formControlName","module",1,"form-control"],[1,"ml-auto"],["type","submit",1,"btn","btn-primary","fa","fa-plus-circle"],[1,"row"],[1,"col-12"],[1,"d-flex","mt-4"],[1,"p-0"],["type","text","placeholder","Module","id","search",1,"form-control",3,"keyup"],[1,"ml-auto","mt-3"],["name","limit","id","limit",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"bootstrap",3,"columnMode","footerHeight","rowHeight","rows","limit"],["name","MODULE","prop","module",3,"width"],["ngx-datatable-cell-template",""],["name","ACTIONS","prop","action",3,"canAutoResize"],["type","button","data-bs-toggle","tooltip","data-bs-placement","top","title","View Module",1,"btn","btn-primary","fa","fa-folder-open",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Course"),e.qZA(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),e._uU(10,"Course Code"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",7)(13,"label",10),e._uU(14,"Course"),e.qZA(),e._UZ(15,"input",11),e.qZA()()()(),e.TgZ(16,"div",3)(17,"h4",4),e._uU(18,"Module Registration"),e.qZA(),e.TgZ(19,"div",5)(20,"form",12),e.NdJ("ngSubmit",function(){return o.createModule()}),e.TgZ(21,"div",13)(22,"div",14)(23,"label",15),e._uU(24,"Module"),e.qZA(),e._UZ(25,"input",16),e.qZA(),e.TgZ(26,"div",17),e._UZ(27,"button",18),e.qZA()()()()(),e.TgZ(28,"div",3)(29,"h4",4),e._uU(30,"Course Modules"),e.qZA(),e.TgZ(31,"div",5)(32,"div",19)(33,"div",20)(34,"div",21)(35,"div",22)(36,"input",23),e.NdJ("keyup",function(a){return o.updateFilter(a)}),e.qZA()(),e.TgZ(37,"div",24)(38,"select",25),e.NdJ("ngModelChange",function(a){return o.limit=a}),e.TgZ(39,"option",26),e._uU(40,"10"),e.qZA(),e.TgZ(41,"option",26),e._uU(42,"25"),e.qZA(),e.TgZ(43,"option",26),e._uU(44,"50"),e.qZA(),e.TgZ(45,"option",26),e._uU(46,"100"),e.qZA()()()(),e.TgZ(47,"ngx-datatable",27)(48,"ngx-datatable-column",28),e.YNc(49,He,1,1,"ng-template",29),e.qZA(),e.TgZ(50,"ngx-datatable-column",30),e.YNc(51,Pe,1,3,"ng-template",29),e.qZA()()()()()()()()()),2&t&&(e.xp6(7),e.Q6J("formGroup",o.courseForm),e.xp6(13),e.Q6J("formGroup",o.moduleForm),e.xp6(18),e.Q6J("ngModel",o.limit),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(2),e.Q6J("columnMode","force")("footerHeight",50)("rowHeight","auto")("rows",o.moduleList)("limit",o.limit),e.xp6(1),e.Q6J("width",200),e.xp6(2),e.Q6J("canAutoResize",!1))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,i.EJ,i.On,i.YN,i.Kr,Z.nE,Z.UC,Z.vq,f.rH],styles:[""]}),s})(),Ke=(()=>{class s{constructor(t,o,n,a){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.courseForm=this.formBuilder.group({courseCode:["",i.kI.required],course:["",i.kI.required]})}ngOnInit(){this.courseStore.dispatch(F({_id:this.courseId})),this.courseStore.select(N).subscribe(t=>{this.initializeValues(t)})}get fc(){return this.courseForm.controls}initializeValues(t){this.courseForm.controls.courseCode.setValue(t.courseCode),this.courseForm.controls.course.setValue(t.course)}updateCourse(){"INVALID"!==this.courseForm.status?(this.courseStore.dispatch(z({course:this.courseForm.value,id:this.courseId})),this.courseStore.select(N).subscribe(o=>{this.initializeValues(o)})):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-update-course"]],inputs:{courseId:"courseId"},decls:21,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],[1,"row"],[1,"col-12"],["for","courseCode",1,"form-label"],["type","text","id","courseCode","formControlName","courseCode",1,"form-control"],["for","course",1,"form-label"],["type","text","id","course","formControlName","course",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Course"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.updateCourse()}),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"Course Code"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",8)(15,"label",11),e._uU(16,"Course"),e.qZA(),e._UZ(17,"input",12),e.qZA()()()(),e.TgZ(18,"div",13)(19,"button",14),e._uU(20,"Update"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.courseForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[""]}),s})(),Xe=(()=>{class s{constructor(t,o,n,a){this.activeModal=t,this.alertifyService=o,this.formBuilder=n,this.courseStore=a,this.courseForm=this.formBuilder.group({courseCode:["",i.kI.required],course:["",i.kI.required]})}ngOnInit(){}get fc(){return this.courseForm.controls}addNewCourse(){"INVALID"!==this.courseForm.status?(this.courseStore.dispatch($({data:this.courseForm.value})),this.courseStore.select(N).subscribe(o=>{o._id.length>0&&this.courseForm.reset()})):this.alertifyService.error("Please fill up all required information.")}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(v.Kz),e.Y36(h.R),e.Y36(i.qu),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-new-course"]],decls:21,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],[1,"row"],[1,"col-12"],["for","courseCode",1,"form-label"],["type","text","id","courseCode","formControlName","courseCode",1,"form-control"],["for","course",1,"form-label"],["type","text","id","course","formControlName","course",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"New Course"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.addNewCourse()}),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"Course Code"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",8)(15,"label",11),e._uU(16,"Course"),e.qZA(),e._UZ(17,"input",12),e.qZA()()()(),e.TgZ(18,"div",13)(19,"button",14),e._uU(20,"Create"),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.courseForm))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[""]}),s})();function We(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().newCourse()}),e._uU(1,"New Course"),e.qZA()}}function et(s,r){1&s&&(e._uU(0),e.ALo(1,"uppercase")),2&s&&e.hij(" ",e.lcZ(1,1,r.row.courseCode)," ")}function tt(s,r){1&s&&(e._uU(0),e.ALo(1,"uppercase")),2&s&&e.hij(" ",e.lcZ(1,1,r.row.course)," ")}function st(s,r){1&s&&(e._uU(0),e.ALo(1,"uppercase")),2&s&&e.hij(" ",e.lcZ(1,1,r.row.course_status)," ")}function ot(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;return e.oxw().updateCourse(n._id)}),e.qZA()}}function it(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;return e.oxw().deactivate(n)}),e.qZA()}}function rt(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().row;return e.oxw().activate(n)}),e.qZA()}}const nt=function(s){return["./modulelist",s]};function ct(s,r){if(1&s&&(e._UZ(0,"button",22),e.YNc(1,ot,1,0,"button",23),e.YNc(2,it,1,0,"button",24),e.YNc(3,rt,1,0,"button",25)),2&s){const t=r.row,o=e.oxw();e.Q6J("routerLink",e.VKq(4,nt,t._id)),e.xp6(1),e.Q6J("ngIf","admin"===o.currentUser.role),e.xp6(1),e.Q6J("ngIf","active"===t.course_status&&"admin"===o.currentUser.role),e.xp6(1),e.Q6J("ngIf","deactivated"===t.course_status&&"admin"===o.currentUser.role)}}const at=[{path:"",component:(()=>{class s{constructor(t,o,n,a){this.alertify=t,this.tokenStorage=o,this.modalService=n,this.courseStore=a,this.limit=10,this.courses=[],this.temp=[],this.currentUser={},this.currentUser=null!==this.tokenStorage.getDecodedUserToken()?this.tokenStorage.getDecodedUserToken():{},this.courseStore.dispatch(y()),this.courses$=this.courseStore.select(ve),this.courses$.subscribe(l=>{this.courses=l,this.temp=l})}ngOnInit(){}ngOnDestroy(){}updateFilter(t){const o=t.target.value.toLowerCase(),n=this.temp.filter(function(a){return-1!==a.course.toLowerCase().indexOf(o)||-1!==a.courseCode.toLowerCase().indexOf(o)||!o});this.courses=n}newCourse(){this.modalService.open(Xe,{size:"lg",centered:!0})}updateCourse(t){this.modalService.open(Ke,{size:"lg",centered:!0}).componentInstance.courseId=t}deactivate(t){this.alertify.confirm("Course Deactivation","Deactivate selected course?",()=>{this.courseStore.dispatch(W({course:t}))})}activate(t){this.alertify.confirm("Course Deactivation","Deactivate selected course?",()=>{this.courseStore.dispatch(X({course:t}))})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.R),e.Y36(L.i),e.Y36(v.FF),e.Y36(c.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-course-list"]],decls:36,vars:11,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col-12","d-flex","justify-content-start"],[1,"row","mt-4"],[1,"col-12"],[1,"container"],[1,"col-12","d-flex","justify-content-end"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex","mt-4"],[1,"p-0"],["type","text","placeholder","Course","id","search",1,"form-control",3,"keyup"],[1,"ml-auto","mt-3"],["name","limit","id","limit",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"row","mt-1"],[1,"bootstrap",3,"columnMode","footerHeight","rowHeight","rows","limit"],["name","CODE","prop","courseCode"],["ngx-datatable-cell-template",""],["name","COURSE","prop","course"],["name","STATUS","prop","course_status"],["name","ACTIONS","prop","action"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Module",1,"btn","btn-outline-primary","fa","fa-newspaper-o",3,"routerLink"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-primary fa fa-pencil","data-bs-toggle","tooltip","data-bs-placement","top","title","View/Edit",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-danger fa fa-ban","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-success fa fa-check","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","View/Edit",1,"btn","btn-outline-primary","fa","fa-pencil",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",1,"btn","btn-outline-danger","fa","fa-ban",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",1,"btn","btn-outline-success","fa","fa-check",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Course Management"),e.qZA()()(),e._UZ(5,"hr"),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",1)(10,"div",6),e.YNc(11,We,2,0,"button",7),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"input",10),e.NdJ("keyup",function(a){return o.updateFilter(a)}),e.qZA()(),e.TgZ(15,"div",11)(16,"select",12),e.NdJ("ngModelChange",function(a){return o.limit=a}),e.TgZ(17,"option",13),e._uU(18,"10"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"25"),e.qZA(),e.TgZ(21,"option",13),e._uU(22,"50"),e.qZA(),e.TgZ(23,"option",13),e._uU(24,"100"),e.qZA()()()(),e.TgZ(25,"div",14)(26,"div",4)(27,"ngx-datatable",15)(28,"ngx-datatable-column",16),e.YNc(29,et,2,3,"ng-template",17),e.qZA(),e.TgZ(30,"ngx-datatable-column",18),e.YNc(31,tt,2,3,"ng-template",17),e.qZA(),e.TgZ(32,"ngx-datatable-column",19),e.YNc(33,st,2,3,"ng-template",17),e.qZA(),e.TgZ(34,"ngx-datatable-column",20),e.YNc(35,ct,4,6,"ng-template",17),e.qZA()()()()()()()()),2&t&&(e.xp6(11),e.Q6J("ngIf","admin"===o.currentUser.role),e.xp6(5),e.Q6J("ngModel",o.limit),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(4),e.Q6J("columnMode","force")("footerHeight",50)("rowHeight","auto")("rows",o.courses)("limit",o.limit))},directives:[C.O5,i.EJ,i.JJ,i.On,i.YN,i.Kr,Z.nE,Z.UC,Z.vq,f.Od,f.rH],pipes:[C.gd],styles:[""]}),s})()},{path:"modulelist/:id",component:ze,resolve:{routeResolver:$e}},{path:"moduleview/:id",component:Re,resolve:{routeResolver:(()=>{class s{constructor(t,o,n){this.alertify=t,this.moduleService=o,this.router=n}resolve(t,o){return this.moduleService.GetById(t.params.id).pipe((0,b.U)(n=>n),(0,oe.K)(n=>(this.alertify.error(n.error.error),this.router.navigateByUrl("/mainview/course"),ie.E)))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(h.R),e.LFG(k),e.LFG(f.F0))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}];let ut=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[f.Bz.forChild(at)],f.Bz]}),s})(),lt=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[C.ez,ut,v.IJ,i.UX,Z.xD,i.u5,c.Aw.forFeature("course",ue),d.sQ.forFeature([ce])]]}),s})()}}]);