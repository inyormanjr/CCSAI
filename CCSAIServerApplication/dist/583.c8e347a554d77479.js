"use strict";(self.webpackChunkCCSAIWebApplication=self.webpackChunkCCSAIWebApplication||[]).push([[583],{6583:(Ze,F,u)=>{u.r(F),u.d(F,{UserModule:()=>Ue});var m=u(6517),n=u(6727);const Z=(0,n.PH)("[User] Load Users"),N=(0,n.PH)("[User] Load Users Success",(0,n.Ky)()),S=((0,n.PH)("[User] Load Users Failure",(0,n.Ky)()),(0,n.PH)("[User] Get user by Id",(0,n.Ky)())),y=(0,n.PH)("[User] Get user by Id Success",(0,n.Ky)()),O=(0,n.PH)("[User] Get user by Id Failure",(0,n.Ky)()),P=(0,n.PH)("[User] Create User",(0,n.Ky)()),q=(0,n.PH)("[User] Update User",(0,n.Ky)()),T=(0,n.PH)("[User] Change User Password",(0,n.Ky)()),L=(0,n.PH)("[User] Change User Password by Admin",(0,n.Ky)()),k=(0,n.PH)("[User] Activate User",(0,n.Ky)()),I=(0,n.PH)("[User] Deactivate User",(0,n.Ky)()),x="user",Q=(0,n.Lq)({userList:[],user:{_id:"",firstName:"",lastName:"",fullName:"",email:"",role:"",user_status:""}},(0,n.on)(N,(t,i)=>Object.assign(Object.assign({},t),{userList:i.data})),(0,n.on)(y,(t,i)=>Object.assign(Object.assign({},t),{user:i.user})),(0,n.on)(O,(t,i)=>Object.assign(Object.assign({},t),{user:{_id:"",firstName:"",lastName:"",fullName:"",email:"",role:"",user_status:""}})));var h=u(9808),J=u(8896),f=u(4850),R=u(7221),e=u(5e3),U=u(75),G=u(372),A=u(5781),p=u(4159);let $=(()=>{class t{constructor(r,o,a,c){this.alertify=r,this.tokenStorage=o,this.userService=a,this.router=c,this.currentUser=this.tokenStorage.getDecodedUserToken()}resolve(r,o){return this.userService.GetById(this.currentUser.id).pipe((0,f.U)(a=>a),(0,R.K)(a=>(this.alertify.error(a.error.error),this.router.navigateByUrl("/mainview/dashboard"),J.E)))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(U.R),e.LFG(G.i),e.LFG(A.f),e.LFG(p.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=u(4182);let j=(()=>{class t{constructor(r,o){this.activatedRoute=r,this.formBuilder=o,this.userForm=this.formBuilder.group({firstName:["",s.kI.required],lastName:["",s.kI.required],email:["",s.kI.required],role:[null,[s.kI.required]],user_status:["",s.kI.required]}),this.activatedRoute.data.subscribe(a=>{this.initializeValues(a.routeResolver.data)})}ngOnInit(){}get cfc(){return this.userForm.controls}initializeValues(r){this.userForm.controls.firstName.setValue(r.firstName.toUpperCase()),this.userForm.controls.lastName.setValue(r.lastName.toUpperCase()),this.userForm.controls.email.setValue(r.email.toUpperCase()),this.userForm.controls.role.setValue(r.role.toUpperCase()),this.userForm.controls.user_status.setValue(r.user_status.toUpperCase())}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(p.gz),e.Y36(s.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-profile"]],decls:28,vars:1,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","g-3","mt-4",3,"formGroup"],[1,"col-md-6"],["for","firstName",1,"form-label"],["type","text","formControlName","firstName","id","firstName","readonly","",1,"form-control"],["for","lastName",1,"form-label"],["type","text","formControlName","lastName","id","lastName","readonly","",1,"form-control"],[1,"col-md-12","mt-4"],["for","email",1,"form-label"],["type","text","formControlName","email","id","email","readonly","",1,"form-control"],[1,"col-md-6","mt-4"],["for","role",1,"form-label"],["type","text","formControlName","role","id","role","readonly","",1,"form-control"],["for","user_status",1,"form-label"],["type","text","formControlName","user_status","id","user_status","readonly","",1,"form-control"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"User Profile"),e.qZA(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"label",8),e._uU(10,"First Name"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",7)(13,"label",10),e._uU(14,"Last name"),e.qZA(),e._UZ(15,"input",11),e.qZA(),e.TgZ(16,"div",12)(17,"label",13),e._uU(18,"Email"),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.TgZ(20,"div",15)(21,"label",16),e._uU(22,"Role"),e.qZA(),e._UZ(23,"input",17),e.qZA(),e.TgZ(24,"div",15)(25,"label",18),e._uU(26,"Status"),e.qZA(),e._UZ(27,"input",19),e.qZA()()()()()()()),2&r&&(e.xp6(7),e.Q6J("formGroup",o.userForm))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[""]}),t})();function C(t,i){return r=>{const a=r.controls[i];a.errors&&!a.errors.mustMatch||a.setErrors(r.controls[t].value!==a.value?{mustMatch:!0}:null)}}let E=(()=>{class t{constructor(r,o,a){this.alertifyService=r,this.formBuilder=o,this.userStore=a,this.passwordForm=this.formBuilder.group({currentPassword:["",s.kI.required],newPassword:["",s.kI.required],confirmPassword:["",s.kI.required]},{validator:C("newPassword","confirmPassword")})}ngOnInit(){}get fc(){return this.passwordForm.controls}changePassword(){var r;if("INVALID"!==this.passwordForm.status)this.userStore.dispatch(T({userPassword:this.passwordForm.value}));else{if(null===(r=this.fc.confirmPassword.errors)||void 0===r?void 0:r.mustMatch)return void this.alertifyService.error("Password doesn't match.");this.alertifyService.error("Please fill up all required information.")}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(U.R),e.Y36(s.qu),e.Y36(n.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-user-password"]],decls:23,vars:1,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-2"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-12","mt-4"],["for","currentPassword",1,"form-label"],["type","password","id","currentPassword","formControlName","currentPassword",1,"form-control"],[1,"col-md-6","mt-2"],["for","newPassword",1,"form-label"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5,"Change Password"),e.qZA(),e.TgZ(6,"div",5)(7,"form",6),e.NdJ("ngSubmit",function(){return o.changePassword()}),e.TgZ(8,"div",7)(9,"label",8),e._uU(10,"Current Password"),e.qZA(),e._UZ(11,"input",9),e.qZA(),e.TgZ(12,"div",10)(13,"label",11),e._uU(14,"New Password"),e.qZA(),e._UZ(15,"input",12),e.qZA(),e.TgZ(16,"div",10)(17,"label",13),e._uU(18,"Confirm New Password"),e.qZA(),e._UZ(19,"input",14),e.qZA(),e.TgZ(20,"div",7)(21,"button",15),e._uU(22,"Proceed"),e.qZA()()()()()()()()),2&r&&(e.xp6(7),e.Q6J("formGroup",o.passwordForm))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u],styles:[""]}),t})();var b=(()=>{return(t=b||(b={})).admin="admin",t.student="student",t.instructor="instructor",b;var t})();const Y=(0,n.ZF)(x),H=(0,n.P1)(Y,t=>t.userList),K=(0,n.P1)(Y,t=>t.user);function D(t,i){if(1&t&&(e.TgZ(0,"option",31),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&t){const r=i.$implicit;e.Q6J("ngValue",r.value),e.xp6(1),e.Oqu(e.lcZ(2,2,r.value))}}const z=function(){return["../../"]};let W=(()=>{class t{constructor(r,o,a,c){this.alertifyService=r,this.formBuilder=o,this.activatedRoute=a,this.userStore=c,this.eRoles=b,this.id="",this.userForm=this.formBuilder.group({firstName:["",s.kI.required],lastName:["",s.kI.required],email:["",s.kI.required],role:[null,[s.kI.required]],user_status:["",s.kI.required]}),this.passwordForm=this.formBuilder.group({newPassword:["",s.kI.required],confirmPassword:["",s.kI.required]},{validator:C("newPassword","confirmPassword")}),this.activatedRoute.data.subscribe(w=>{this.id=w.routeResolver.data._id,this.initializeValues(w.routeResolver.data)})}ngOnInit(){}get cfc(){return this.userForm.controls}get pfc(){return this.passwordForm.controls}initializeValues(r){this.userForm.controls.firstName.setValue(r.firstName.toUpperCase()),this.userForm.controls.lastName.setValue(r.lastName.toUpperCase()),this.userForm.controls.email.setValue(r.email.toUpperCase()),this.userForm.controls.role.setValue(r.role),this.userForm.controls.user_status.setValue(r.user_status.toUpperCase())}updateUser(){"INVALID"!==this.userForm.status?(this.userStore.dispatch(q({user:this.userForm.value,id:this.id})),this.userStore.select(K).subscribe(o=>{this.initializeValues(o)})):this.alertifyService.error("Please fill up all required information.")}changePassword(){var r;if("INVALID"!==this.passwordForm.status)this.userStore.dispatch(L({userPassword:this.passwordForm.value,id:this.id}));else{if(null===(r=this.pfc.confirmPassword.errors)||void 0===r?void 0:r.mustMatch)return void this.alertifyService.error("Password doesn't match.");this.alertifyService.error("Please fill up all required information.")}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(U.R),e.Y36(s.qu),e.Y36(p.gz),e.Y36(n.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-user"]],decls:54,vars:8,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"row","g-3","mt-4",3,"formGroup","ngSubmit"],[1,"col-md-6"],["for","firstName",1,"form-label"],["type","text","formControlName","firstName","id","firstName",1,"form-control"],["for","lastName",1,"form-label"],["type","text","formControlName","lastName","id","lastName",1,"form-control"],[1,"col-md-12"],["for","email",1,"form-label"],["type","text","formControlName","email","id","email","readonly","",1,"form-control"],[1,"col-md-6","mt-2"],["for","role",1,"form-label"],["id","role","formControlName","role",1,"form-control"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","user_status",1,"form-label"],["type","text","formControlName","user_status","id","user_status","readonly","",1,"form-control"],[1,"col-12","mt-4"],["type","submit",1,"btn","btn-primary"],[1,"row","g-3",3,"formGroup","ngSubmit"],["for","password",1,"form-label"],["type","password","formControlName","newPassword","id","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","formControlName","confirmPassword","id","confirmPassword",1,"form-control"],["routerLinkActive","router-link-active",1,"btn","btn-primary","mr-2",3,"routerLink"],[3,"ngValue"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Update User"),e.qZA(),e.TgZ(6,"div",5)(7,"h5",6),e._uU(8,"User Information"),e.qZA(),e.TgZ(9,"form",7),e.NdJ("ngSubmit",function(){return o.updateUser()}),e.TgZ(10,"div",8)(11,"label",9),e._uU(12,"First Name"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e.TgZ(14,"div",8)(15,"label",11),e._uU(16,"Last name"),e.qZA(),e._UZ(17,"input",12),e.qZA(),e.TgZ(18,"div",13)(19,"label",14),e._uU(20,"Email"),e.qZA(),e._UZ(21,"input",15),e.qZA(),e.TgZ(22,"div",16)(23,"label",17),e._uU(24,"Role"),e.qZA(),e.TgZ(25,"select",18)(26,"option",19),e._uU(27,"-----Select Role-----"),e.qZA(),e.YNc(28,D,3,4,"option",20),e.ALo(29,"keyvalue"),e.qZA()(),e.TgZ(30,"div",16)(31,"label",21),e._uU(32,"Status"),e.qZA(),e._UZ(33,"input",22),e.qZA(),e.TgZ(34,"div",23)(35,"button",24),e._uU(36,"Update User"),e.qZA()()(),e._UZ(37,"hr"),e.TgZ(38,"h5",6),e._uU(39,"Change Password"),e.qZA(),e.TgZ(40,"form",25),e.NdJ("ngSubmit",function(){return o.changePassword()}),e.TgZ(41,"div",16)(42,"label",26),e._uU(43,"Password"),e.qZA(),e._UZ(44,"input",27),e.qZA(),e.TgZ(45,"div",16)(46,"label",28),e._uU(47,"Confirm Password"),e.qZA(),e._UZ(48,"input",29),e.qZA(),e.TgZ(49,"div",23)(50,"button",30),e._uU(51,"Back"),e.qZA(),e.TgZ(52,"button",24),e._uU(53,"Change Password"),e.qZA()()()()()()()()),2&r&&(e.xp6(9),e.Q6J("formGroup",o.userForm),e.xp6(17),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.lcZ(29,5,o.eRoles)),e.xp6(12),e.Q6J("formGroup",o.passwordForm),e.xp6(10),e.Q6J("routerLink",e.DdM(7,z)))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.EJ,s.YN,s.Kr,h.sg,p.Od,p.rH],pipes:[h.Nd,h.gd],styles:[""]}),t})();var X=u(2654),ee=u(8929);let V=(()=>{class t{constructor(){this.clearFormSource=new ee.xQ,this.clearForm$=this.clearFormSource.asObservable()}clearForm(){this.clearFormSource.next(!0)}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function te(t,i){if(1&t&&(e.TgZ(0,"option",27),e._uU(1),e.ALo(2,"uppercase"),e.qZA()),2&t){const r=i.$implicit;e.Q6J("ngValue",r.value),e.xp6(1),e.Oqu(e.lcZ(2,2,r.value))}}const re=function(){return["../"]};let se=(()=>{class t{constructor(r,o,a,c){this.alertifyService=r,this.formBuilder=o,this.userStore=a,this.clearFormService=c,this.clearFormSubscription=new X.w,this.eRoles=b,this.userForm=this.formBuilder.group({firstName:["",s.kI.required],lastName:["",s.kI.required],email:["",s.kI.required],role:[null,s.kI.required],password:["",s.kI.required],confirmPassword:["",s.kI.required]},{validator:C("password","confirmPassword")})}ngOnInit(){}ngOnDestroy(){this.clearFormSubscription.unsubscribe()}get fc(){return this.userForm.controls}register(){var r;if("INVALID"!==this.userForm.status)this.userStore.dispatch(P({data:this.userForm.value})),this.clearFormSubscription=this.clearFormService.clearForm$.subscribe(a=>{this.userForm.reset()});else{if(null===(r=this.fc.confirmPassword.errors)||void 0===r?void 0:r.mustMatch)return void this.alertifyService.error("Password doesn't match.");this.alertifyService.error("Please fill up all required information.")}}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(U.R),e.Y36(s.qu),e.Y36(n.yh),e.Y36(V))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:42,vars:7,consts:[[1,"container-fluid","mt-4"],[1,"row","mt-4"],[1,"container"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-6"],["for","firstName",1,"form-label"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["for","lastName",1,"form-label"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],[1,"col-12","mt-2"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email",1,"form-control"],[1,"col-md-6","mt-2"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["for","confirmPassword",1,"form-label"],["type","password","id","confirmPassword","formControlName","confirmPassword",1,"form-control"],["for","userRole",1,"form-label"],["id","userRole","formControlName","role",1,"form-control"],["selected","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-12","mt-4"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-primary","mr-2",3,"routerLink"],["type","submit",1,"btn","btn-primary"],[3,"ngValue"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4"),e._uU(6," User Registration"),e.qZA()(),e.TgZ(7,"div",5)(8,"form",6),e.NdJ("ngSubmit",function(){return o.register()}),e.TgZ(9,"div",7)(10,"label",8),e._uU(11,"First Name"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"div",7)(14,"label",10),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.qZA(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",14),e.qZA(),e.TgZ(21,"div",15)(22,"label",16),e._uU(23,"Password"),e.qZA(),e._UZ(24,"input",17),e.qZA(),e.TgZ(25,"div",15)(26,"label",18),e._uU(27,"Confirm Password"),e.qZA(),e._UZ(28,"input",19),e.qZA(),e.TgZ(29,"div",12)(30,"label",20),e._uU(31,"Role"),e.qZA(),e.TgZ(32,"select",21)(33,"option",22),e._uU(34,"-----Select Role-----"),e.qZA(),e.YNc(35,te,3,4,"option",23),e.ALo(36,"keyvalue"),e.qZA()(),e.TgZ(37,"div",24)(38,"button",25),e._uU(39,"Back"),e.qZA(),e.TgZ(40,"button",26),e._uU(41,"Register"),e.qZA()()()()()()()()),2&r&&(e.xp6(8),e.Q6J("formGroup",o.userForm),e.xp6(25),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngForOf",e.lcZ(36,4,o.eRoles)),e.xp6(3),e.Q6J("routerLink",e.DdM(6,re)))},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,s.EJ,s.YN,s.Kr,h.sg,p.Od,p.rH],pipes:[h.Nd,h.gd],styles:[""]}),t})();var _=u(4702);const oe=function(){return["./register"]};function ie(t,i){1&t&&(e.TgZ(0,"button",22),e._uU(1,"Register User"),e.qZA()),2&t&&e.Q6J("routerLink",e.DdM(1,oe))}function ae(t,i){1&t&&(e._uU(0),e.ALo(1,"uppercase")),2&t&&e.hij(" ",e.lcZ(1,1,i.row.firstName)," ")}function ne(t,i){1&t&&(e._uU(0),e.ALo(1,"uppercase")),2&t&&e.hij(" ",e.lcZ(1,1,i.row.lastName)," ")}function le(t,i){1&t&&(e._uU(0),e.ALo(1,"uppercase")),2&t&&e.hij(" ",e.lcZ(1,1,i.row.role)," ")}function ue(t,i){1&t&&(e._uU(0),e.ALo(1,"uppercase")),2&t&&e.hij(" ",e.lcZ(1,1,i.row.user_status)," ")}function ce(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(r);const a=e.oxw().row;return e.oxw().deactivate(a)}),e.qZA()}}function me(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(r);const a=e.oxw().row;return e.oxw().activate(a)}),e.qZA()}}const de=function(t){return["./updateuser",t]};function pe(t,i){if(1&t&&(e._UZ(0,"button",23),e.YNc(1,ce,1,0,"button",24),e.YNc(2,me,1,0,"button",25)),2&t){const r=i.row;e.Q6J("routerLink",e.VKq(3,de,r._id)),e.xp6(1),e.Q6J("ngIf","active"===r.user_status),e.xp6(1),e.Q6J("ngIf","deactivated"===r.user_status)}}let fe=(()=>{class t{constructor(r,o,a){this.alertify=r,this.tokenStorage=o,this.userStore=a,this.limit=10,this.currentUser={},this.userList=[],this.temp=[],this.totalSize=0,this.pageSize=0,this.currentPage=0,this.currentUser=null!==this.tokenStorage.getDecodedUserToken()?this.tokenStorage.getDecodedUserToken():{},this.userStore.dispatch(Z()),this.users$=this.userStore.select(H),this.users$.subscribe(c=>{this.userList=c,this.temp=c})}ngOnInit(){}ngOnDestroy(){}updateFilter(r){const o=r.target.value.toLowerCase(),a=this.temp.filter(function(c){return-1!==c.firstName.toLowerCase().indexOf(o)||-1!==c.lastName.toLowerCase().indexOf(o)||!o});this.userList=a}deactivate(r){this.alertify.confirm("User Activation","Activate selected user?",()=>{this.userStore.dispatch(I({user:r}))})}activate(r){this.alertify.confirm("User Activation","Activate selected user?",()=>{this.userStore.dispatch(k({user:r}))})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(U.R),e.Y36(G.i),e.Y36(n.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],decls:38,vars:11,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col-12","d-flex","justify-content-start"],[1,"row","mt-4"],[1,"col-12"],[1,"container"],[1,"col-12","d-flex","justify-content-end"],["type","button","class","btn btn-primary","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[1,"d-flex","mt-4"],[1,"p-0"],["type","text","placeholder","Name","id","search",1,"form-control",3,"keyup"],[1,"ml-auto","mt-3"],["name","limit","id","limit",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"row","mt-1"],[1,"bootstrap",3,"columnMode","footerHeight","rowHeight","rows","limit"],["name","FIRST NAME","prop","firstName"],["ngx-datatable-cell-template",""],["name","LAST NAME","prop","lastName"],["name","ROLE","prop","role"],["name","STATUS","prop","user_status"],["name","ACTIONS","prop","action"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","View/Edit",1,"btn","btn-outline-primary","fa","fa-pencil",3,"routerLink"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-danger fa fa-ban","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","class","btn btn-outline-success fa fa-check","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",3,"click",4,"ngIf"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Deactivate",1,"btn","btn-outline-danger","fa","fa-ban",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","Activate",1,"btn","btn-outline-success","fa","fa-check",3,"click"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"User Management"),e.qZA()()(),e._UZ(5,"hr"),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",1)(10,"div",6),e.YNc(11,ie,2,2,"button",7),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"input",10),e.NdJ("keyup",function(c){return o.updateFilter(c)}),e.qZA()(),e.TgZ(15,"div",11)(16,"select",12),e.NdJ("ngModelChange",function(c){return o.limit=c}),e.TgZ(17,"option",13),e._uU(18,"10"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"25"),e.qZA(),e.TgZ(21,"option",13),e._uU(22,"50"),e.qZA(),e.TgZ(23,"option",13),e._uU(24,"100"),e.qZA()()()(),e.TgZ(25,"div",14)(26,"div",4)(27,"ngx-datatable",15)(28,"ngx-datatable-column",16),e.YNc(29,ae,2,3,"ng-template",17),e.qZA(),e.TgZ(30,"ngx-datatable-column",18),e.YNc(31,ne,2,3,"ng-template",17),e.qZA(),e.TgZ(32,"ngx-datatable-column",19),e.YNc(33,le,2,3,"ng-template",17),e.qZA(),e.TgZ(34,"ngx-datatable-column",20),e.YNc(35,ue,2,3,"ng-template",17),e.qZA(),e.TgZ(36,"ngx-datatable-column",21),e.YNc(37,pe,3,5,"ng-template",17),e.qZA()()()()()()()()),2&r&&(e.xp6(11),e.Q6J("ngIf","admin"===o.currentUser.role),e.xp6(5),e.Q6J("ngModel",o.limit),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(4),e.Q6J("columnMode","force")("footerHeight",50)("rowHeight","auto")("rows",o.userList)("limit",o.limit))},directives:[h.O5,p.Od,p.rH,s.EJ,s.JJ,s.On,s.YN,s.Kr,_.nE,_.UC,_.vq],pipes:[h.gd],styles:["tr[_ngcontent-%COMP%]{height:2px!important}"]}),t})(),M=(()=>{class t{constructor(r,o,a){this.alertify=r,this.userService=o,this.router=a}resolve(r,o){return this.userService.GetById(r.params.id).pipe((0,f.U)(a=>a),(0,R.K)(a=>(this.alertify.error(a.error.error),this.router.navigateByUrl("/mainview/users"),J.E)))}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(U.R),e.LFG(A.f),e.LFG(p.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const he=[{path:"",component:fe},{path:"updateuser/:id",component:W,resolve:{routeResolver:M}},{path:"userprofile",component:j,resolve:{routeResolver:$}},{path:"changeuserpassword",component:E},{path:"register",component:se}];let ge=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(he)],p.Bz]}),t})();var g=u(2994),v=u(8259);let ve=(()=>{class t{constructor(r,o,a,c,w,be){this.actions$=r,this.userStore=o,this.userService=a,this.alertify=c,this.router=w,this.clearFormService=be,this.loadUsers$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(Z),(0,g.b)(d=>{this.userService.Get(0,0).pipe((0,f.U)(l=>{this.userStore.dispatch(N({data:l.data}))})).subscribe(v.noop,l=>console.log(l))})),{dispatch:!1}),this.getUserById$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(S),(0,g.b)(d=>{this.userService.GetById(d._id).pipe((0,f.U)(l=>{this.userStore.dispatch(y({user:l.data}))})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.createUser$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(P),(0,g.b)(d=>{this.userService.Create(d.data).pipe((0,f.U)(l=>{this.alertify.success("User Registered."),this.clearFormService.clearForm()})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.updateUser$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(q),(0,g.b)(d=>{this.userService.updateUser(d.id,d.user).pipe((0,f.U)(l=>{this.userStore.dispatch(S({_id:l.data._id})),this.alertify.success("User Info Saved.")})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.changeUserPassword$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(T),(0,g.b)(d=>{this.userService.changePassword(d.userPassword).pipe((0,f.U)(l=>{this.userStore.dispatch(y({user:l.data})),this.alertify.success("Password changed successfully.")})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.changeUserPasswordAdmin$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(L),(0,g.b)(d=>{this.userService.changePasswordAdmin(d.id,d.userPassword).pipe((0,f.U)(l=>{this.userStore.dispatch(y({user:l.data})),this.alertify.success("Password changed successfully.")})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.activateUser$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(k),(0,g.b)(d=>{this.userService.activateUser(d.user).pipe((0,f.U)(l=>{this.userStore.dispatch(Z()),this.alertify.success("User Activated")})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1}),this.deactivateUser$=(0,m.GW)(()=>this.actions$.pipe((0,m.l4)(I),(0,g.b)(d=>{this.userService.deactivateUser(d.user).pipe((0,f.U)(l=>{this.userStore.dispatch(Z()),this.alertify.success("User Deactivated")})).subscribe(v.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1})}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(m.eX),e.LFG(n.yh),e.LFG(A.f),e.LFG(U.R),e.LFG(p.F0),e.LFG(V))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),Ue=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[M],imports:[[h.ez,s.UX,ge,_.xD,s.u5,n.Aw.forFeature(x,Q),m.sQ.forFeature([ve])]]}),t})()}}]);