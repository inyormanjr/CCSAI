"use strict";(self.webpackChunkCCSAIWebApplication=self.webpackChunkCCSAIWebApplication||[]).push([[732],{8732:(V,N,a)=>{a.r(N),a.d(N,{TermModule:()=>R});var d=a(6517),p=a(2994),h=a(4850),i=a(6727);const T=(0,i.PH)("[Term] Load Terms"),F=(0,i.PH)("[Term] Load Terms Success",(0,i.Ky)()),U=((0,i.PH)("[Term] Load Terms Failure",(0,i.Ky)()),(0,i.PH)("[Term] Create Term",(0,i.Ky)())),v=(0,i.PH)("[Term] Get term by Id",(0,i.Ky)()),_=(0,i.PH)("[Term] Get term by Id Success",(0,i.Ky)()),A=(0,i.PH)("[Term] Get term by Id Failure",(0,i.Ky)()),J=(0,i.PH)("[Term] Create term Success",(0,i.Ky)()),I=(0,i.PH)("[Term] Update Term",(0,i.Ky)()),L=(0,i.PH)("[Term] Create term Failure");var f=a(8259),e=a(5e3),M=a(1181),y=a(75);let O=(()=>{class t{constructor(r,o,m,c){this.actions$=r,this.termStore=o,this.termService=m,this.alertify=c,this.loadTerms$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(T),(0,p.b)(u=>{this.termService.Get(0,0).pipe((0,h.U)(l=>{this.termStore.dispatch(F({data:l.data}))})).subscribe(f.noop,l=>console.log(l))})),{dispatch:!1}),this.getTermById$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(v),(0,p.b)(u=>{this.termService.GetById(u._id).pipe((0,h.U)(l=>{this.termStore.dispatch(_({term:l.data}))})).subscribe(f.noop,l=>{this.termStore.dispatch(A({error:l})),this.alertify.error(l.error.error)})})),{dispatch:!1}),this.createTerm$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(U),(0,p.b)(u=>{this.termService.Create(u.data).pipe((0,h.U)(l=>{this.termStore.dispatch(T()),this.termStore.dispatch(J({data:l.data})),this.alertify.success("Term Saved.")})).subscribe(f.noop,l=>{this.termStore.dispatch(L()),this.alertify.error(l.error.error)})})),{dispatch:!1}),this.updateTerm$=(0,d.GW)(()=>this.actions$.pipe((0,d.l4)(I),(0,p.b)(u=>{this.termService.Update(u.id,u.term).pipe((0,h.U)(l=>{this.termStore.dispatch(v({_id:l.data._id})),this.termStore.dispatch(T()),this.alertify.success("Term Saved.")})).subscribe(f.noop,l=>{this.alertify.error(l.error.error)})})),{dispatch:!1})}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(d.eX),e.LFG(i.yh),e.LFG(M.F),e.LFG(y.R))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();const x="term",k=(0,i.Lq)({terms:[],term:{_id:"",termName:""}},(0,i.on)(F,(t,s)=>Object.assign(Object.assign({},t),{terms:s.data})),(0,i.on)(_,(t,s)=>Object.assign(Object.assign({},t),{term:s.term})),(0,i.on)(A,(t,s)=>Object.assign(Object.assign({},t),{term:{_id:"",termName:""}})),(0,i.on)(J,(t,s)=>Object.assign(Object.assign({},t),{term:s.data})),(0,i.on)(L,(t,s)=>Object.assign(Object.assign({},t),{term:{_id:"",termName:""}})));var S=a(9808),n=a(4182);const w=(0,i.ZF)(x),Y=(0,i.P1)(w,t=>t.terms),C=(0,i.P1)(w,t=>t.term);var g=a(777);let G=(()=>{class t{constructor(r,o,m,c){this.activeModal=r,this.termStore=o,this.alertifyService=m,this.formBuilder=c,this.termForm=this.formBuilder.group({termName:["",n.kI.required]})}ngOnInit(){this.termStore.dispatch(v({_id:this.termId})),this.termStore.select(C).subscribe(r=>{this.initializeValues(r)})}get fc(){return this.termForm.controls}updateTerm(){"INVALID"!==this.termForm.status?(this.termStore.dispatch(I({term:this.termForm.value,id:this.termId})),this.termStore.select(C).subscribe(o=>{this.initializeValues(o)})):this.alertifyService.error("Please fill up all required information.")}initializeValues(r){this.termForm.controls.termName.setValue(r.termName)}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.Kz),e.Y36(i.yh),e.Y36(y.R),e.Y36(n.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-update-term"]],inputs:{termId:"termId"},decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","termName",1,"form-label"],["type","text","id","termName","formControlName","termName",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"Update Term"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.updateTerm()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Term Name"),e.qZA(),e._UZ(11,"input",8),e.qZA()(),e.TgZ(12,"div",9)(13,"button",10),e._uU(14,"Update"),e.qZA()()()),2&r&&(e.xp6(6),e.Q6J("formGroup",o.termForm))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:[""]}),t})(),H=(()=>{class t{constructor(r,o,m,c){this.activeModal=r,this.alertifyService=o,this.formBuilder=m,this.termStore=c,this.termForm=this.formBuilder.group({termName:["",n.kI.required]})}ngOnInit(){}get fc(){return this.termForm.controls}addNewTerm(){"INVALID"!==this.termForm.status?(this.termStore.dispatch(U({data:this.termForm.value})),this.termStore.select(C).subscribe(o=>{o._id.length>0&&this.termForm.reset()})):this.alertifyService.error("Please fill up all required information.")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(g.Kz),e.Y36(y.R),e.Y36(n.qu),e.Y36(i.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-new-term"]],decls:15,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"formGroup","ngSubmit"],[1,"modal-body"],[1,"mb-3"],["for","termName",1,"form-label"],["type","text","id","termName","formControlName","termName",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2,"New Term"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.addNewTerm()}),e.TgZ(7,"div",5)(8,"div",6)(9,"label",7),e._uU(10,"Term Name"),e.qZA(),e._UZ(11,"input",8),e.qZA()(),e.TgZ(12,"div",9)(13,"button",10),e._uU(14,"Create"),e.qZA()()()),2&r&&(e.xp6(6),e.Q6J("formGroup",o.termForm))},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:[""]}),t})();var q=a(372),b=a(4702),Z=a(4159);function P(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){return e.CHM(r),e.oxw().newTerm()}),e._uU(1,"New Term"),e.qZA()}}function z(t,s){1&t&&(e._uU(0),e.ALo(1,"uppercase")),2&t&&e.hij(" ",e.lcZ(1,1,s.row.termName)," ")}function B(t,s){if(1&t){const r=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const c=e.CHM(r).row;return e.oxw().updateTerm(c._id)}),e.qZA()}}const K=[{path:"",component:(()=>{class t{constructor(r,o,m){this.tokenStorage=r,this.modalService=o,this.termStore=m,this.limit=10,this.terms=[],this.temp=[],this.currentUser={},this.currentUser=null!==this.tokenStorage.getDecodedUserToken()?this.tokenStorage.getDecodedUserToken():{},this.termStore.dispatch(T()),this.terms$=this.termStore.select(Y),this.terms$.subscribe(c=>{this.terms=c,this.temp=c})}ngOnInit(){}ngOnDestroy(){}updateFilter(r){const o=r.target.value.toLowerCase(),m=this.temp.filter(function(c){return-1!==c.termName.toLowerCase().indexOf(o)||!o});this.terms=m}newTerm(){this.modalService.open(H,{size:"lg",centered:!0})}updateTerm(r){this.modalService.open(G,{size:"lg",centered:!0}).componentInstance.termId=r}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(q.i),e.Y36(g.FF),e.Y36(i.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-term-list"]],decls:32,vars:13,consts:[[1,"container-fluid","mt-4"],[1,"row"],[1,"col-12","d-flex","justify-content-start"],[1,"row","mt-4"],[1,"col-12"],[1,"container"],[1,"col-12","d-flex","justify-content-end"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],[1,"d-flex","mt-4"],[1,"p-0"],["type","text","placeholder","Term","id","search",1,"form-control",3,"keyup"],[1,"ml-auto","mt-3"],["name","limit","id","limit",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"row","mt-1"],[1,"bootstrap",3,"columnMode","footerHeight","rowHeight","rows","limit"],["name","TERM","prop","termName",3,"width"],["ngx-datatable-cell-template",""],["name","ACTIONS","prop","action",3,"canAutoResize"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","routerLinkActive","router-link-active","data-bs-toggle","tooltip","data-bs-placement","top","title","View/Edit",1,"btn","btn-outline-primary","fa","fa-pencil",3,"click"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Term Management"),e.qZA()()(),e._UZ(5,"hr"),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",1)(10,"div",6),e.YNc(11,P,2,0,"button",7),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"input",10),e.NdJ("keyup",function(c){return o.updateFilter(c)}),e.qZA()(),e.TgZ(15,"div",11)(16,"select",12),e.NdJ("ngModelChange",function(c){return o.limit=c}),e.TgZ(17,"option",13),e._uU(18,"10"),e.qZA(),e.TgZ(19,"option",13),e._uU(20,"25"),e.qZA(),e.TgZ(21,"option",13),e._uU(22,"50"),e.qZA(),e.TgZ(23,"option",13),e._uU(24,"100"),e.qZA()()()(),e.TgZ(25,"div",14)(26,"div",4)(27,"ngx-datatable",15)(28,"ngx-datatable-column",16),e.YNc(29,z,2,3,"ng-template",17),e.qZA(),e.TgZ(30,"ngx-datatable-column",18),e.YNc(31,B,1,0,"ng-template",17),e.qZA()()()()()()()()),2&r&&(e.xp6(11),e.Q6J("ngIf","admin"===o.currentUser.role),e.xp6(5),e.Q6J("ngModel",o.limit),e.xp6(1),e.Q6J("ngValue",10),e.xp6(2),e.Q6J("ngValue",25),e.xp6(2),e.Q6J("ngValue",50),e.xp6(2),e.Q6J("ngValue",100),e.xp6(4),e.Q6J("columnMode","force")("footerHeight",50)("rowHeight","auto")("rows",o.terms)("limit",o.limit),e.xp6(1),e.Q6J("width",200),e.xp6(2),e.Q6J("canAutoResize",!1))},directives:[S.O5,n.EJ,n.JJ,n.On,n.YN,n.Kr,b.nE,b.UC,b.vq,Z.Od],pipes:[S.gd],styles:["tr[_ngcontent-%COMP%]{height:2px!important}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[Z.Bz.forChild(K)],Z.Bz]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[S.ez,n.UX,Q,g.IJ,b.xD,n.u5,i.Aw.forFeature(x,k),d.sQ.forFeature([O])]]}),t})()}}]);